<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Collection - ArrayList 源码解析 | 个人主页</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/images/photo.jpg">
    <link rel="manifest" href="/images/photo.jpg">
    <link rel="apple-touch-icon" href="/images/photo.jpg">
    <meta name="description" content="Personal Website">
    <meta http-quiv="pragma" cotent="no-cache">
    <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
    <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/assets/css/0.styles.cfd1e9a2.css" as="style"><link rel="preload" href="/assets/js/app.0d6df2e4.js" as="script"><link rel="preload" href="/assets/js/3.2c60df78.js" as="script"><link rel="preload" href="/assets/js/42.7690245a.js" as="script"><link rel="prefetch" href="/assets/js/10.a675ef31.js"><link rel="prefetch" href="/assets/js/100.c1d0cb0f.js"><link rel="prefetch" href="/assets/js/101.c3caeaf7.js"><link rel="prefetch" href="/assets/js/102.c33f1aeb.js"><link rel="prefetch" href="/assets/js/103.eddf2e86.js"><link rel="prefetch" href="/assets/js/104.943ce33b.js"><link rel="prefetch" href="/assets/js/105.d04687f0.js"><link rel="prefetch" href="/assets/js/106.2dfd0540.js"><link rel="prefetch" href="/assets/js/107.d0139f1c.js"><link rel="prefetch" href="/assets/js/108.24c68d63.js"><link rel="prefetch" href="/assets/js/109.a88c2829.js"><link rel="prefetch" href="/assets/js/11.561f08ee.js"><link rel="prefetch" href="/assets/js/110.ec9d9c92.js"><link rel="prefetch" href="/assets/js/111.a37b7b9f.js"><link rel="prefetch" href="/assets/js/112.862950f9.js"><link rel="prefetch" href="/assets/js/113.bf489717.js"><link rel="prefetch" href="/assets/js/114.0569b17d.js"><link rel="prefetch" href="/assets/js/115.cf784dec.js"><link rel="prefetch" href="/assets/js/116.92c16b65.js"><link rel="prefetch" href="/assets/js/117.991782bd.js"><link rel="prefetch" href="/assets/js/12.e4c2aa4a.js"><link rel="prefetch" href="/assets/js/13.35f9ed5a.js"><link rel="prefetch" href="/assets/js/14.b7f6f87c.js"><link rel="prefetch" href="/assets/js/15.808b42c3.js"><link rel="prefetch" href="/assets/js/16.9a65883a.js"><link rel="prefetch" href="/assets/js/17.dbfc7bb2.js"><link rel="prefetch" href="/assets/js/18.c329e942.js"><link rel="prefetch" href="/assets/js/19.83deeff3.js"><link rel="prefetch" href="/assets/js/2.40aa7bb6.js"><link rel="prefetch" href="/assets/js/20.bdd777c1.js"><link rel="prefetch" href="/assets/js/21.b486bbf9.js"><link rel="prefetch" href="/assets/js/22.a25a903b.js"><link rel="prefetch" href="/assets/js/23.925ff4e0.js"><link rel="prefetch" href="/assets/js/24.ceff7a46.js"><link rel="prefetch" href="/assets/js/25.760d6451.js"><link rel="prefetch" href="/assets/js/26.66b0e693.js"><link rel="prefetch" href="/assets/js/27.79296467.js"><link rel="prefetch" href="/assets/js/28.6f5b92df.js"><link rel="prefetch" href="/assets/js/29.f2b1ce52.js"><link rel="prefetch" href="/assets/js/30.3bafedc7.js"><link rel="prefetch" href="/assets/js/31.b967adc4.js"><link rel="prefetch" href="/assets/js/32.bfcba426.js"><link rel="prefetch" href="/assets/js/33.c838af1a.js"><link rel="prefetch" href="/assets/js/34.6f70f963.js"><link rel="prefetch" href="/assets/js/35.40935f03.js"><link rel="prefetch" href="/assets/js/36.bcf1bbbf.js"><link rel="prefetch" href="/assets/js/37.48e1a430.js"><link rel="prefetch" href="/assets/js/38.82997478.js"><link rel="prefetch" href="/assets/js/39.77436fc0.js"><link rel="prefetch" href="/assets/js/4.7d10bedd.js"><link rel="prefetch" href="/assets/js/40.bc3182ae.js"><link rel="prefetch" href="/assets/js/41.71103288.js"><link rel="prefetch" href="/assets/js/43.d2d3d553.js"><link rel="prefetch" href="/assets/js/44.3f350618.js"><link rel="prefetch" href="/assets/js/45.97083dfb.js"><link rel="prefetch" href="/assets/js/46.a41e95bb.js"><link rel="prefetch" href="/assets/js/47.8540ef07.js"><link rel="prefetch" href="/assets/js/48.54629455.js"><link rel="prefetch" href="/assets/js/49.5f90d180.js"><link rel="prefetch" href="/assets/js/5.b88ed74c.js"><link rel="prefetch" href="/assets/js/50.7fa4c3a4.js"><link rel="prefetch" href="/assets/js/51.6ebb146b.js"><link rel="prefetch" href="/assets/js/52.fe6e9396.js"><link rel="prefetch" href="/assets/js/53.fa23c041.js"><link rel="prefetch" href="/assets/js/54.90582436.js"><link rel="prefetch" href="/assets/js/55.b8844963.js"><link rel="prefetch" href="/assets/js/56.5fd08d82.js"><link rel="prefetch" href="/assets/js/57.d57125ff.js"><link rel="prefetch" href="/assets/js/58.0696d91e.js"><link rel="prefetch" href="/assets/js/59.cf936091.js"><link rel="prefetch" href="/assets/js/6.d4fec8b7.js"><link rel="prefetch" href="/assets/js/60.e0404bbf.js"><link rel="prefetch" href="/assets/js/61.fd7b24c0.js"><link rel="prefetch" href="/assets/js/62.bab35282.js"><link rel="prefetch" href="/assets/js/63.bc3aab78.js"><link rel="prefetch" href="/assets/js/64.5f1bfff1.js"><link rel="prefetch" href="/assets/js/65.c431a11a.js"><link rel="prefetch" href="/assets/js/66.e2d06bb1.js"><link rel="prefetch" href="/assets/js/67.32853338.js"><link rel="prefetch" href="/assets/js/68.342b04c0.js"><link rel="prefetch" href="/assets/js/69.a1ce55b6.js"><link rel="prefetch" href="/assets/js/7.3197ebba.js"><link rel="prefetch" href="/assets/js/70.496c0997.js"><link rel="prefetch" href="/assets/js/71.31b35f4d.js"><link rel="prefetch" href="/assets/js/72.62ea27e4.js"><link rel="prefetch" href="/assets/js/73.2c961c77.js"><link rel="prefetch" href="/assets/js/74.8dbb42b8.js"><link rel="prefetch" href="/assets/js/75.f80b5005.js"><link rel="prefetch" href="/assets/js/76.07020749.js"><link rel="prefetch" href="/assets/js/77.930e3bad.js"><link rel="prefetch" href="/assets/js/78.fc6f0094.js"><link rel="prefetch" href="/assets/js/79.c72fd757.js"><link rel="prefetch" href="/assets/js/8.6e794918.js"><link rel="prefetch" href="/assets/js/80.8c9694ec.js"><link rel="prefetch" href="/assets/js/81.383d5cfc.js"><link rel="prefetch" href="/assets/js/82.1253ca4a.js"><link rel="prefetch" href="/assets/js/83.f0ff7a4d.js"><link rel="prefetch" href="/assets/js/84.5910af60.js"><link rel="prefetch" href="/assets/js/85.a9330cf0.js"><link rel="prefetch" href="/assets/js/86.e4b0497e.js"><link rel="prefetch" href="/assets/js/87.664f4a10.js"><link rel="prefetch" href="/assets/js/88.69b05471.js"><link rel="prefetch" href="/assets/js/89.4f1a869b.js"><link rel="prefetch" href="/assets/js/9.94dfd66d.js"><link rel="prefetch" href="/assets/js/90.91a54f02.js"><link rel="prefetch" href="/assets/js/91.cfe61516.js"><link rel="prefetch" href="/assets/js/92.99f20c42.js"><link rel="prefetch" href="/assets/js/93.dea260f7.js"><link rel="prefetch" href="/assets/js/94.4d34f33a.js"><link rel="prefetch" href="/assets/js/95.1977d5c8.js"><link rel="prefetch" href="/assets/js/96.07bc7add.js"><link rel="prefetch" href="/assets/js/97.548d05ca.js"><link rel="prefetch" href="/assets/js/98.3e689473.js"><link rel="prefetch" href="/assets/js/99.3382c108.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cfd1e9a2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">个人主页</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java面向对象和基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/basic/java-basic-oop.html" class="nav-link">
  Java基础-面向对象
</a></li><li class="dropdown-subitem"><a href="/md/java/basic/java-basic-lan-basic.html" class="nav-link">
  Java基础-知识点
</a></li><li class="dropdown-subitem"><a href="/md/java/basic/java-basic-lan-sum.html" class="nav-link">
  Java 基础 - 图谱 &amp; Q/A
</a></li></ul></li><li class="dropdown-item"><h4>
          Java集合框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/collection/java-collection-all.html" class="nav-link">
  Java 集合框架详解
</a></li></ul></li><li class="dropdown-item"><h4>
          Java进阶 - 并发框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/thread/java-thread-x-overview.html" class="nav-link">
  Java 并发知识体系
</a></li><li class="dropdown-subitem"><a href="/md/java/thread/java-thread-x-theorty.html" class="nav-link">
  Java 并发理论基础
</a></li><li class="dropdown-subitem"><a href="/md/java/thread/java-thread-x-thread-basic.html" class="nav-link">
  Java 并发线程基础
</a></li><li class="dropdown-subitem"><a href="/md/java/thread/java-thread-x-juc-overview.html" class="nav-link">
  J.U.C 知识体系与详解
</a></li></ul></li><li class="dropdown-item"><h4>
          Java进阶 - IO框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/io/java-io-overview.html" class="nav-link">
  Java IO/NIO/AIO详解
</a></li></ul></li><li class="dropdown-item"><h4>
          Java进阶 - 新版本特性
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/java8/java8.html" class="nav-link">
  Java 8 特性详解
</a></li><li class="dropdown-subitem"><a href="/md/java/java8up/java-8-up-overview.html" class="nav-link">
  Java 8 以上版本特性体系
</a></li><li class="dropdown-subitem"><a href="/md/java/java8up/java9-11.html" class="nav-link">
  Java 8 升Java 11特性必读
</a></li></ul></li><li class="dropdown-item"><h4>
          Java进阶 - JVM相关
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/jvm/java-jvm-classload.html" class="nav-link">
  Java 类加载机制
</a></li><li class="dropdown-subitem"><a href="/md/java/jvm/java-jvm-class.html" class="nav-link">
  Java 字节码和增强技术
</a></li><li class="dropdown-subitem"><a href="/md/java/jvm/java-jvm-struct.html" class="nav-link">
  JVM 内存结构详解
</a></li><li class="dropdown-subitem"><a href="/md/java/jvm/java-jvm-gc.html" class="nav-link">
  JVM 垃圾回收机制
</a></li><li class="dropdown-subitem"><a href="/md/java/jvm/java-jvm-debug-tools-linux.html" class="nav-link">
  Java 调试排错相关
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          数据库相关介绍
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/db/info/mysql.html" class="nav-link">
  mysql
</a></li><li class="dropdown-subitem"><a href="/md/db/info/oracle.html" class="nav-link">
  oracle
</a></li><li class="dropdown-subitem"><a href="/md/db/info/h2.html" class="nav-link">
  h2
</a></li></ul></li><li class="dropdown-item"><h4>
          框架介绍
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/db/frame/mybatis/mybatis-base-overview.html" class="nav-link">
  mybatis
</a></li><li class="dropdown-subitem"><a href="/md/db/frame/mp/mp-base-overview.html" class="nav-link">
  mybatis-plus
</a></li><li class="dropdown-subitem"><a href="/md/db/frame/jpa/jpa-base-overview.html" class="nav-link">
  jpa
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          redis
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/middleware/redis/redis-overview.html" class="nav-link">
  redis各大版本
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人记录" class="dropdown-title"><span class="title">个人记录</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人记录" class="mobile-dropdown-title"><span class="title">个人记录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          2024
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/owner/2024/229-1.html" class="nav-link">
  vuepress打包报unsupported
</a></li><li class="dropdown-subitem"><a href="/md/owner/2024/229-2.html" class="nav-link">
  待定
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/xianglong123/cas-blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java面向对象和基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/basic/java-basic-oop.html" class="nav-link">
  Java基础-面向对象
</a></li><li class="dropdown-subitem"><a href="/md/java/basic/java-basic-lan-basic.html" class="nav-link">
  Java基础-知识点
</a></li><li class="dropdown-subitem"><a href="/md/java/basic/java-basic-lan-sum.html" class="nav-link">
  Java 基础 - 图谱 &amp; Q/A
</a></li></ul></li><li class="dropdown-item"><h4>
          Java集合框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/collection/java-collection-all.html" class="nav-link">
  Java 集合框架详解
</a></li></ul></li><li class="dropdown-item"><h4>
          Java进阶 - 并发框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/thread/java-thread-x-overview.html" class="nav-link">
  Java 并发知识体系
</a></li><li class="dropdown-subitem"><a href="/md/java/thread/java-thread-x-theorty.html" class="nav-link">
  Java 并发理论基础
</a></li><li class="dropdown-subitem"><a href="/md/java/thread/java-thread-x-thread-basic.html" class="nav-link">
  Java 并发线程基础
</a></li><li class="dropdown-subitem"><a href="/md/java/thread/java-thread-x-juc-overview.html" class="nav-link">
  J.U.C 知识体系与详解
</a></li></ul></li><li class="dropdown-item"><h4>
          Java进阶 - IO框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/io/java-io-overview.html" class="nav-link">
  Java IO/NIO/AIO详解
</a></li></ul></li><li class="dropdown-item"><h4>
          Java进阶 - 新版本特性
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/java8/java8.html" class="nav-link">
  Java 8 特性详解
</a></li><li class="dropdown-subitem"><a href="/md/java/java8up/java-8-up-overview.html" class="nav-link">
  Java 8 以上版本特性体系
</a></li><li class="dropdown-subitem"><a href="/md/java/java8up/java9-11.html" class="nav-link">
  Java 8 升Java 11特性必读
</a></li></ul></li><li class="dropdown-item"><h4>
          Java进阶 - JVM相关
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/jvm/java-jvm-classload.html" class="nav-link">
  Java 类加载机制
</a></li><li class="dropdown-subitem"><a href="/md/java/jvm/java-jvm-class.html" class="nav-link">
  Java 字节码和增强技术
</a></li><li class="dropdown-subitem"><a href="/md/java/jvm/java-jvm-struct.html" class="nav-link">
  JVM 内存结构详解
</a></li><li class="dropdown-subitem"><a href="/md/java/jvm/java-jvm-gc.html" class="nav-link">
  JVM 垃圾回收机制
</a></li><li class="dropdown-subitem"><a href="/md/java/jvm/java-jvm-debug-tools-linux.html" class="nav-link">
  Java 调试排错相关
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          数据库相关介绍
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/db/info/mysql.html" class="nav-link">
  mysql
</a></li><li class="dropdown-subitem"><a href="/md/db/info/oracle.html" class="nav-link">
  oracle
</a></li><li class="dropdown-subitem"><a href="/md/db/info/h2.html" class="nav-link">
  h2
</a></li></ul></li><li class="dropdown-item"><h4>
          框架介绍
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/db/frame/mybatis/mybatis-base-overview.html" class="nav-link">
  mybatis
</a></li><li class="dropdown-subitem"><a href="/md/db/frame/mp/mp-base-overview.html" class="nav-link">
  mybatis-plus
</a></li><li class="dropdown-subitem"><a href="/md/db/frame/jpa/jpa-base-overview.html" class="nav-link">
  jpa
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          redis
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/middleware/redis/redis-overview.html" class="nav-link">
  redis各大版本
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人记录" class="dropdown-title"><span class="title">个人记录</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人记录" class="mobile-dropdown-title"><span class="title">个人记录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          2024
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/owner/2024/229-1.html" class="nav-link">
  vuepress打包报unsupported
</a></li><li class="dropdown-subitem"><a href="/md/owner/2024/229-2.html" class="nav-link">
  待定
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/xianglong123/cas-blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java 基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/basic/java-basic-oop.html" class="sidebar-link">Java 基础 - 面向对象</a></li><li><a href="/md/java/basic/java-basic-lan-basic.html" class="sidebar-link">Java 基础 - 知识点</a></li><li><a href="/md/java/basic/java-basic-lan-sum.html" class="sidebar-link">Java 基础 - 图谱 &amp; Q/A</a></li><li><a href="/md/java/basic/java-basic-x-generic.html" class="sidebar-link">Java 基础 - 泛型机制详解</a></li><li><a href="/md/java/basic/java-basic-x-exception.html" class="sidebar-link">Java 基础 - 异常机制详解</a></li><li><a href="/md/java/basic/java-basic-x-reflection.html" class="sidebar-link">Java 基础 - 反射机制详解</a></li><li><a href="/md/java/advanced/java-advanced-spi.html" class="sidebar-link">Java常用机制 - SPI机制详解</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java 集合框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/collection/java-collection-all.html" class="sidebar-link">Collection 类关系图</a></li><li><a href="/md/java/collection/java-collection-ArrayList.html" aria-current="page" class="active sidebar-link">Collection - ArrayList 源码解析</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/md/java/collection/java-collection-LinkedList.html" class="sidebar-link">Collection - LinkedList源码解析</a></li><li><a href="/md/java/collection/java-collection-Queue&amp;Stack.html" class="sidebar-link">Collection - Stack &amp; Queue 源码解析</a></li><li><a href="/md/java/collection/java-collection-PriorityQueue.html" class="sidebar-link">Collection - PriorityQueue源码解析</a></li><li><a href="/md/java/collection/java-map-HashMap&amp;HashSet.html" class="sidebar-link">Map - HashSet &amp; HashMap 源码解析</a></li><li><a href="/md/java/collection/java-map-LinkedHashMap&amp;LinkedHashSet.html" class="sidebar-link">Map - LinkedHashSet&amp;Map源码解析</a></li><li><a href="/md/java/collection/java-map-TreeMap&amp;TreeSet.html" class="sidebar-link">Map - TreeSet &amp; TreeMap 源码解析</a></li><li><a href="/md/java/collection/java-map-WeakHashMap.html" class="sidebar-link">Map - WeakHashMap源码解析</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java 多线程与并发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/thread/java-thread-x-overview.html" class="sidebar-link">♥Java并发知识体系详解♥</a></li><li><a href="/md/java/thread/java-thread-x-theorty.html" class="sidebar-link">Java 并发 - 理论基础</a></li><li><a href="/md/java/thread/java-thread-x-thread-basic.html" class="sidebar-link">Java 并发 - 线程基础</a></li><li><a href="/md/java/thread/java-thread-x-lock-all.html" class="sidebar-link">Java并发 - Java中所有的锁</a></li><li><a href="/md/java/thread/java-thread-x-key-synchronized.html" class="sidebar-link">关键字:synchronized详解</a></li><li><a href="/md/java/thread/java-thread-x-key-volatile.html" class="sidebar-link">关键字:volatile详解</a></li><li><a href="/md/java/thread/java-thread-x-key-final.html" class="sidebar-link">关键字:final详解</a></li><li><a href="/md/java/thread/java-thread-x-juc-overview.html" class="sidebar-link">JUC - 类汇总和学习指南</a></li><li><a href="/md/java/thread/java-thread-x-juc-AtomicInteger.html" class="sidebar-link">JUC原子类CAS, Unsafe和原子类详解</a></li><li><a href="/md/java/thread/java-thread-x-lock-LockSupport.html" class="sidebar-link">JUC锁:LockSupport详解</a></li><li><a href="/md/java/thread/java-thread-x-lock-AbstractQueuedSynchronizer.html" class="sidebar-link">JUC锁:锁核心类AQS详解</a></li><li><a href="/md/java/thread/java-thread-x-lock-ReentrantLock.html" class="sidebar-link">JUC锁:ReentrantLock详解</a></li><li><a href="/md/java/thread/java-thread-x-lock-ReentrantReadWriteLock.html" class="sidebar-link">JUC锁:ReentrantReadWriteLock详解</a></li><li><a href="/md/java/thread/java-thread-x-juc-collection-ConcurrentHashMap.html" class="sidebar-link">JUC集合:ConcurrentHashMap详解</a></li><li><a href="/md/java/thread/java-thread-x-juc-collection-CopyOnWriteArrayList.html" class="sidebar-link">JUC集合:CopyOnWriteArrayList详解</a></li><li><a href="/md/java/thread/java-thread-x-juc-collection-ConcurrentLinkedQueue.html" class="sidebar-link">JUC集合:ConcurrentLinkedQueue详解</a></li><li><a href="/md/java/thread/java-thread-x-juc-collection-BlockingQueue.html" class="sidebar-link">JUC集合:BlockingQueue详解</a></li><li><a href="/md/java/thread/java-thread-x-juc-executor-FutureTask.html" class="sidebar-link">JUC线程池:FutureTask详解</a></li><li><a href="/md/java/thread/java-thread-x-juc-executor-ThreadPoolExecutor.html" class="sidebar-link">JUC线程池:ThreadPoolExecutor详解</a></li><li><a href="/md/java/thread/java-thread-x-juc-executor-ScheduledThreadPoolExecutor.html" class="sidebar-link">JUC线程池:ScheduledThreadPoolExecutor详解</a></li><li><a href="/md/java/thread/java-thread-x-juc-executor-ForkJoinPool.html" class="sidebar-link">JUC线程池:Fork/Join框架详解</a></li><li><a href="/md/java/thread/java-thread-x-juc-tool-countdownlatch.html" class="sidebar-link">JUC工具类:CountDownLatch详解</a></li><li><a href="/md/java/thread/java-thread-x-juc-tool-cyclicbarrier.html" class="sidebar-link">JUC工具类:CyclicBarrier详解</a></li><li><a href="/md/java/thread/java-thread-x-juc-tool-semaphore.html" class="sidebar-link">JUC工具类:Semaphore详解</a></li><li><a href="/md/java/thread/java-thread-x-juc-tool-phaser.html" class="sidebar-link">JUC工具类:Phaser详解</a></li><li><a href="/md/java/thread/java-thread-x-juc-tool-exchanger.html" class="sidebar-link">JUC工具类:Exchanger详解</a></li><li><a href="/md/java/thread/java-thread-x-threadlocal.html" class="sidebar-link">Java 并发 - ThreadLocal详解</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java IO/NIO/AIO</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/io/java-io-overview.html" class="sidebar-link">♥Java IO知识体系详解♥</a></li><li><a href="/md/java/io/java-io-basic-category.html" class="sidebar-link">Java IO - 分类(传输，操作)</a></li><li><a href="/md/java/io/java-io-basic-design-pattern.html" class="sidebar-link">Java IO - 设计模式(装饰者模式)</a></li><li><a href="/md/java/io/java-io-basic-code-inputstream.html" class="sidebar-link">Java IO - 源码:InputStream</a></li><li><a href="/md/java/io/java-io-basic-code-outputstream.html" class="sidebar-link">Java IO - 源码:OutputStream</a></li><li><a href="/md/java/io/java-io-basic-usage.html" class="sidebar-link">Java IO - 常见类使用</a></li><li><a href="/md/java/io/java-io-model.html" class="sidebar-link">IO 模型 - Unix IO 模型</a></li><li><a href="/md/java/io/java-io-bio.html" class="sidebar-link">Java IO - BIO 详解</a></li><li><a href="/md/java/io/java-io-nio.html" class="sidebar-link">Java NIO - 基础详解</a></li><li><a href="/md/java/io/java-io-nio-select-epoll.html" class="sidebar-link">Java NIO - IO多路复用详解</a></li><li><a href="/md/java/io/java-io-aio.html" class="sidebar-link">Java AIO - 异步IO详解</a></li><li><a href="/md/java/io/java-io-nio-netty.html" class="sidebar-link">Java N(A)IO - 框架:Netty</a></li><li><a href="/md/java/io/java-io-nio-zerocopy.html" class="sidebar-link">Java NIO - 零拷贝实现</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java8 特性详解</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/java8/java8.html" class="sidebar-link">♥Java8特性知识体系详解♥</a></li><li><a href="/md/java/java8/java8-stream.html" class="sidebar-link">Java 8 - 函数编程(lambda表达式)</a></li><li><a href="/md/java/java8/java8-optional.html" class="sidebar-link">Java 8 - Optional类深度解析</a></li><li><a href="/md/java/java8/java8-default.html" class="sidebar-link">Java 8 - 默认方法</a></li><li><a href="/md/java/java8/java8-type-anno.html" class="sidebar-link">Java 8 - 类型注解</a></li><li><a href="/md/java/java8/java8-anno-repeat.html" class="sidebar-link">Java 8 - 重复注解</a></li><li><a href="/md/java/java8/java8-type.html" class="sidebar-link">Java 8 - 类型推断优化</a></li><li><a href="/md/java/java8/java8-jre.html" class="sidebar-link">Java 8 - JRE精简</a></li><li><a href="/md/java/java8/java8-permgen.html" class="sidebar-link">Java 8 - 移除Permgen</a></li><li><a href="/md/java/java8/java8-stampedlock.html" class="sidebar-link">Java 8 - StampedLock</a></li><li><a href="/md/java/java8/java8-localdatetime.html" class="sidebar-link">Java 8 - LocalDate/LocalDateTime</a></li><li><a href="/md/java/java8/java8-javafx.html" class="sidebar-link">Java 8 - JavaFx 2.0</a></li><li><a href="/md/java/java8/java8-others.html" class="sidebar-link">Java 8 - 其它更新:字符串base64,...</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java8 以上特性概述</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/java8up/java-8-up-overview.html" class="sidebar-link">♥Java8+特性知识体系详解♥</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JVM相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/jvm/java-jvm-x-overview.html" class="sidebar-link">♥JVM相关知识体系详解♥</a></li><li><a href="/md/java/jvm/java-jvm-class.html" class="sidebar-link">JVM 基础 - 类字节码详解</a></li><li><a href="/md/java/jvm/java-jvm-class-enhancer.html" class="sidebar-link">JVM 基础 - 字节码的增强技术</a></li><li><a href="/md/java/jvm/java-jvm-classload.html" class="sidebar-link">JVM 基础 - Java 类加载机制</a></li><li><a href="/md/java/jvm/java-jvm-struct.html" class="sidebar-link">JVM 基础 - JVM 内存结构</a></li><li><a href="/md/java/jvm/java-jvm-x-introduce.html" class="sidebar-link">JVM 基础 - Java 内存模型引入</a></li><li><a href="/md/java/jvm/java-jvm-jmm.html" class="sidebar-link">JVM 基础 - Java 内存模型详解</a></li><li><a href="/md/java/jvm/java-jvm-gc.html" class="sidebar-link">GC - Java 垃圾回收基础知识</a></li><li><a href="/md/java/jvm/java-jvm-gc-g1.html" class="sidebar-link">GC - Java 垃圾回收器之G1详解</a></li><li><a href="/md/java/jvm/java-jvm-gc-zgc.html" class="sidebar-link">GC - Java 垃圾回收器之ZGC详解</a></li><li><a href="/md/java/jvm/java-jvm-cms-gc.html" class="sidebar-link">GC - Java 垃圾回收器之CMS GC问题分析与解决</a></li><li><a href="/md/java/jvm/java-jvm-param.html" class="sidebar-link">调试排错 - JVM 调优参数</a></li><li><a href="/md/java/jvm/java-jvm-oom.html" class="sidebar-link">调试排错 - Java 内存分析之堆内存和MetaSpace内存</a></li><li><a href="/md/java/jvm/java-jvm-oom-offheap.html" class="sidebar-link">调试排错 - Java 内存分析之堆外内存</a></li><li><a href="/md/java/jvm/java-jvm-thread-dump.html" class="sidebar-link">调试排错 - Java 线程分析之线程Dump分析</a></li><li><a href="/md/java/jvm/java-jvm-debug-tools-linux.html" class="sidebar-link">调试排错 - Java 问题排查之Linux命令</a></li><li><a href="/md/java/jvm/java-jvm-debug-tools-list.html" class="sidebar-link">调试排错 - Java 问题排查之工具单</a></li><li><a href="/md/java/jvm/java-jvm-oom-tool.html" class="sidebar-link">调试排错 - Java 问题排查之JVM可视化工具</a></li><li><a href="/md/java/jvm/java-jvm-agent-arthas.html" class="sidebar-link">调试排错 - Java 问题排查之应用在线调试Arthas</a></li><li><a href="/md/java/jvm/java-jvm-debug-idea.html" class="sidebar-link">调试排错 - Java 问题排查之使用IDEA本地调试和远程调试</a></li><li><a href="/md/java/jvm/java-jvm-agent-usage.html" class="sidebar-link">调试排错 - Java动态调试技术原理</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="collection-arraylist-源码解析"><a href="#collection-arraylist-源码解析" class="header-anchor">#</a> Collection - ArrayList 源码解析</h1> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>本文主要对Collection - ArrayList进行源码解析。 @123</p></div> <ul><li>Collection - ArrayList 源码解析
<ul><li>概述</li> <li>ArrayList的实现
<ul><li>底层数据结构</li> <li>构造函数</li> <li>自动扩容</li> <li>add(), addAll()</li> <li>set()</li> <li>get()</li> <li>remove()</li> <li>trimToSize()</li> <li>indexOf(), lastIndexOf()</li> <li>Fail-Fast机制:</li></ul></li> <li>参考</li></ul></li></ul> <h3 id="概述"><a href="#概述" class="header-anchor">#</a> # 概述</h3> <blockquote><p>_ArrayList_实现了_List_接口，是顺序容器，即元素存放的数据与放进去的顺序相同，允许放入<code>null</code>元素，底层通过<code>数组实现</code>。除该类未实现同步外，其余跟_Vector_大致相同。每个_ArrayList_都有一个容量(capacity)，表示底层数组的实际大小，容器内存储元素的个数不能多于当前容量。当向容器中添加元素时，如果容量不足，容器会自动增大底层数组的大小。前面已经提过，Java泛型只是编译器提供的语法糖，所以这里的数组是一个Object数组，以便能够容纳任何类型的对象。</p></blockquote> <blockquote><p><img src="data:image/png;base64,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" alt="ArrayList_base"></p></blockquote> <blockquote><p>size(), isEmpty(), get(), set()方法均能在常数时间内完成，add()方法的时间开销跟插入位置有关，addAll()方法的时间开销跟添加元素的个数成正比。其余方法大都是线性时间。</p></blockquote> <blockquote><p>为追求效率，ArrayList没有实现同步(synchronized)，如果需要多个线程并发访问，用户可以手动同步，也可使用Vector替代。</p></blockquote> <h3 id="arraylist的实现"><a href="#arraylist的实现" class="header-anchor">#</a> # ArrayList的实现</h3> <h3 id="底层数据结构"><a href="#底层数据结构" class="header-anchor">#</a> # 底层数据结构</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
     * The array buffer into which the elements of the ArrayList are stored.
     * The capacity of the ArrayList is the length of this array buffer. Any
     * empty ArrayList with elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA
     * will be expanded to DEFAULT_CAPACITY when the first element is added.
     */</span>
    <span class="token keyword">transient</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData<span class="token punctuation">;</span> <span class="token comment">// non-private to simplify nested class access</span>

    <span class="token comment">/**
     * The size of the ArrayList (the number of elements it contains).
     *
     * @serial
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="构造函数"><a href="#构造函数" class="header-anchor">#</a> # 构造函数</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
     * Constructs an empty list with the specified initial capacity.
     *
     * @param  initialCapacity  the initial capacity of the list
     * @throws IllegalArgumentException if the specified initial capacity
     *         is negative
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>initialCapacity <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>initialCapacity<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>initialCapacity <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> <span class="token constant">EMPTY_ELEMENTDATA</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;Illegal Capacity: &quot;</span><span class="token operator">+</span>
                                               initialCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Constructs an empty list with an initial capacity of ten.
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> <span class="token constant">DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Constructs a list containing the elements of the specified
     * collection, in the order they are returned by the collection's
     * iterator.
     *
     * @param c the collection whose elements are to be placed into this list
     * @throws NullPointerException if the specified collection is null
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        elementData <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>size <span class="token operator">=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// c.toArray might (incorrectly) not return Object[] (see 6260652)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
                elementData <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> size<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// replace with empty array.</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> <span class="token constant">EMPTY_ELEMENTDATA</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h3 id="自动扩容"><a href="#自动扩容" class="header-anchor">#</a> # 自动扩容</h3> <blockquote><p>每当向数组中添加元素时，都要去检查添加后元素的个数是否会超出当前数组的长度，如果超出，数组将会进行扩容，以满足添加数据的需求。数组扩容通过一个公开的方法ensureCapacity(int minCapacity)来实现。在实际添加大量元素前，我也可以使用ensureCapacity来手动增加ArrayList实例的容量，以减少递增式再分配的数量。</p></blockquote> <blockquote><p>数组进行扩容时，会将老数组中的元素重新拷贝一份到新的数组中，每次数组容量的增长大约是其原容量的1.5倍。这种操作的代价是很高的，因此在实际使用时，我们应该尽量避免数组容量的扩张。当我们可预知要保存的元素的多少时，要在构造ArrayList实例时，就指定其容量，以避免数组扩容的发生。或者根据实际需求，通过调用ensureCapacity方法来手动增加ArrayList实例的容量。</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
     * Increases the capacity of this &lt;tt&gt;ArrayList&lt;/tt&gt; instance, if
     * necessary, to ensure that it can hold at least the number of elements
     * specified by the minimum capacity argument.
     *
     * @param   minCapacity   the desired minimum capacity
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ensureCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> minExpand <span class="token operator">=</span> <span class="token punctuation">(</span>elementData <span class="token operator">!=</span> <span class="token constant">DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span><span class="token punctuation">)</span>
            <span class="token comment">// any size if not default element table</span>
            <span class="token operator">?</span> <span class="token number">0</span>
            <span class="token comment">// larger than default for default empty table. It's already</span>
            <span class="token comment">// supposed to be at default size.</span>
            <span class="token operator">:</span> <span class="token constant">DEFAULT_CAPACITY</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">&gt;</span> minExpand<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">ensureExplicitCapacity</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData <span class="token operator">==</span> <span class="token constant">DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            minCapacity <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_CAPACITY</span><span class="token punctuation">,</span> minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token function">ensureExplicitCapacity</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">ensureExplicitCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>

        <span class="token comment">// overflow-conscious code</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">-</span> elementData<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token function">grow</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * The maximum size of array to allocate.
     * Some VMs reserve some header words in an array.
     * Attempts to allocate larger arrays may result in
     * OutOfMemoryError: Requested array size exceeds VM limit
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">MAX_ARRAY_SIZE</span> <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span> <span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * Increases the capacity to ensure that it can hold at least the
     * number of elements specified by the minimum capacity argument.
     *
     * @param minCapacity the desired minimum capacity
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// overflow-conscious code</span>
        <span class="token keyword">int</span> oldCapacity <span class="token operator">=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">int</span> newCapacity <span class="token operator">=</span> oldCapacity <span class="token operator">+</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> minCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            newCapacity <span class="token operator">=</span> minCapacity<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> <span class="token constant">MAX_ARRAY_SIZE</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            newCapacity <span class="token operator">=</span> <span class="token function">hugeCapacity</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// minCapacity is usually close to size, so this is a win:</span>
        elementData <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> newCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">hugeCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// overflow</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">OutOfMemoryError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">&gt;</span> <span class="token constant">MAX_ARRAY_SIZE</span><span class="token punctuation">)</span> <span class="token operator">?</span>
            <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span> <span class="token operator">:</span>
            <span class="token constant">MAX_ARRAY_SIZE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br></div></div><blockquote><p><img src="data:image/png;base64,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" alt="ArrayList_grow"></p></blockquote> <h3 id="add-addall"><a href="#add-addall" class="header-anchor">#</a> # add(), addAll()</h3> <blockquote><p>跟C++ 的_vector_不同，_ArrayList_没有<code>push_back()</code>方法，对应的方法是<code>add(E e)</code>，_ArrayList_也没有<code>insert()</code>方法，对应的方法是<code>add(int index, E e)</code>。这两个方法都是向容器中添加新元素，这可能会导致_capacity_不足，因此在添加元素之前，都需要进行剩余空间检查，如果需要则自动扩容。扩容操作最终是通过<code>grow()</code>方法完成的。</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
     * Appends the specified element to the end of this list.
     *
     * @param e element to be appended to this list
     * @return &lt;tt&gt;true&lt;/tt&gt; (as specified by {@link Collection#add})
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Increments modCount!!</span>
        elementData<span class="token punctuation">[</span>size<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Inserts the specified element at the specified position in this
     * list. Shifts the element currently at that position (if any) and
     * any subsequent elements to the right (adds one to their indices).
     *
     * @param index index at which the specified element is to be inserted
     * @param element element to be inserted
     * @throws IndexOutOfBoundsException {@inheritDoc}
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">rangeCheckForAdd</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Increments modCount!!</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
                         size <span class="token operator">-</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>
        size<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><blockquote><p><img src="/assets/img/ArrayList_add.eda4b8c2.png" alt="ArrayList_add"></p></blockquote> <blockquote><p><code>add(int index, E e)</code>需要先对元素进行移动，然后完成插入操作，也就意味着该方法有着线性的时间复杂度。</p></blockquote> <blockquote><p><code>addAll()</code>方法能够一次添加多个元素，根据位置不同也有两个版本，一个是在末尾添加的</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>方法，一个是从指定位置开始插入的</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>方法。跟<code>add()</code>方法类似，在插入之前也需要进行空间检查，如果需要则自动扩容；如果从指定位置插入，也会存在移动元素的情况。 <code>addAll()</code>的时间复杂度不仅跟插入元素的多少有关，也跟插入的位置相关。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
     * Appends all of the elements in the specified collection to the end of
     * this list, in the order that they are returned by the
     * specified collection's Iterator.  The behavior of this operation is
     * undefined if the specified collection is modified while the operation
     * is in progress.  (This implies that the behavior of this call is
     * undefined if the specified collection is this list, and this
     * list is nonempty.)
     *
     * @param c collection containing elements to be added to this list
     * @return &lt;tt&gt;true&lt;/tt&gt; if this list changed as a result of the call
     * @throws NullPointerException if the specified collection is null
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addAll</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> numNew <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> numNew<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Increments modCount</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> size<span class="token punctuation">,</span> numNew<span class="token punctuation">)</span><span class="token punctuation">;</span>
        size <span class="token operator">+=</span> numNew<span class="token punctuation">;</span>
        <span class="token keyword">return</span> numNew <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Inserts all of the elements in the specified collection into this
     * list, starting at the specified position.  Shifts the element
     * currently at that position (if any) and any subsequent elements to
     * the right (increases their indices).  The new elements will appear
     * in the list in the order that they are returned by the
     * specified collection's iterator.
     *
     * @param index index at which to insert the first element from the
     *              specified collection
     * @param c collection containing elements to be added to this list
     * @return &lt;tt&gt;true&lt;/tt&gt; if this list changed as a result of the call
     * @throws IndexOutOfBoundsException {@inheritDoc}
     * @throws NullPointerException if the specified collection is null
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addAll</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">rangeCheckForAdd</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> numNew <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> numNew<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Increments modCount</span>

        <span class="token keyword">int</span> numMoved <span class="token operator">=</span> size <span class="token operator">-</span> index<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>numMoved <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index <span class="token operator">+</span> numNew<span class="token punctuation">,</span>
                             numMoved<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span> numNew<span class="token punctuation">)</span><span class="token punctuation">;</span>
        size <span class="token operator">+=</span> numNew<span class="token punctuation">;</span>
        <span class="token keyword">return</span> numNew <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h3 id="set"><a href="#set" class="header-anchor">#</a> # set()</h3> <blockquote><p>既然底层是一个数组_ArrayList_的<code>set()</code>方法也就变得非常简单，直接对数组的指定位置赋值即可。</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">rangeCheck</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//下标越界检查</span>
    <span class="token class-name">E</span> oldValue <span class="token operator">=</span> <span class="token function">elementData</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> element<span class="token punctuation">;</span><span class="token comment">//赋值到指定位置，复制的仅仅是引用</span>
    <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="get"><a href="#get" class="header-anchor">#</a> # get()</h3> <blockquote><p><code>get()</code>方法同样很简单，唯一要注意的是由于底层数组是Object[]，得到元素后需要进行类型转换。</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">rangeCheck</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//注意类型转换</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="remove"><a href="#remove" class="header-anchor">#</a> # remove()</h3> <blockquote><p><code>remove()</code>方法也有两个版本，一个是<code>remove(int index)</code>删除指定位置的元素，另一个是<code>remove(Object o)</code>删除第一个满足</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>的元素。删除操作是<code>add()</code>操作的逆过程，需要将删除点之后的元素向前移动一个位置。需要注意的是为了让GC起作用，必须显式的为最后一个位置赋<code>null</code>值。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">rangeCheck</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token class-name">E</span> oldValue <span class="token operator">=</span> <span class="token function">elementData</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> numMoved <span class="token operator">=</span> size <span class="token operator">-</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>numMoved <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span> numMoved<span class="token punctuation">)</span><span class="token punctuation">;</span>
    elementData<span class="token punctuation">[</span><span class="token operator">--</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//清除该位置的引用，让GC起作用</span>
    <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>关于Java GC这里需要特别说明一下，<code>有了垃圾收集器并不意味着一定不会有内存泄漏</code>。对象能否被GC的依据是是否还有引用指向它，上面代码中如果不手动赋<code>null</code>值，除非对应的位置被其他元素覆盖，否则原来的对象就一直不会被回收。</p></blockquote> <h3 id="trimtosize"><a href="#trimtosize" class="header-anchor">#</a> # trimToSize()</h3> <blockquote><p>ArrayList还给我们提供了将底层数组的容量调整为当前列表保存的实际元素的大小的功能。它可以通过trimToSize方法来实现。代码如下:</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
     * Trims the capacity of this &lt;tt&gt;ArrayList&lt;/tt&gt; instance to be the
     * list's current size.  An application can use this operation to minimize
     * the storage of an &lt;tt&gt;ArrayList&lt;/tt&gt; instance.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">trimToSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">&lt;</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            elementData <span class="token operator">=</span> <span class="token punctuation">(</span>size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
              <span class="token operator">?</span> <span class="token constant">EMPTY_ELEMENTDATA</span>
              <span class="token operator">:</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="indexof-lastindexof"><a href="#indexof-lastindexof" class="header-anchor">#</a> # indexOf(), lastIndexOf()</h3> <blockquote><p>获取元素的第一次出现的index:</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
     * Returns the index of the first occurrence of the specified element
     * in this list, or -1 if this list does not contain the element.
     * More formally, returns the lowest index &lt;tt&gt;i&lt;/tt&gt; such that
     * &lt;tt&gt;(o==null&amp;nbsp;?&amp;nbsp;get(i)==null&amp;nbsp;:&amp;nbsp;o.equals(get(i)))&lt;/tt&gt;,
     * or -1 if there is no such index.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><blockquote><p>获取元素的最后一次出现的index:</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
     * Returns the index of the last occurrence of the specified element
     * in this list, or -1 if this list does not contain the element.
     * More formally, returns the highest index &lt;tt&gt;i&lt;/tt&gt; such that
     * &lt;tt&gt;(o==null&amp;nbsp;?&amp;nbsp;get(i)==null&amp;nbsp;:&amp;nbsp;o.equals(get(i)))&lt;/tt&gt;,
     * or -1 if there is no such index.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> size<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> size<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="fail-fast机制"><a href="#fail-fast机制" class="header-anchor">#</a> # Fail-Fast机制:</h3> <blockquote><p>ArrayList也采用了快速失败的机制，通过记录modCount参数来实现。在面对并发的修改时，迭代器很快就会完全失败，而不是冒着在将来某个不确定时间发生任意不确定行为的风险。</p></blockquote> <h3 id="参考"><a href="#参考" class="header-anchor">#</a> # 参考</h3> <ul><li>深入Java集合学习系列: ArrayList的实现原理 http://zhangshixi.iteye.com/blog/674856</li> <li>Java ArrayList源码剖析 结合源码对ArrayList进行讲解 http://www.cnblogs.com/CarpenterLee/p/5419880.html</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/12/2023, 11:33:13 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/md/java/collection/java-collection-all.html" class="prev">
        Collection 类关系图
      </a></span> <span class="next"><a href="/md/java/collection/java-collection-LinkedList.html">
        Collection - LinkedList源码解析
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:290px;display:none;" data-v-5775ee02>
      欢迎来到我的博客
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="260px" height="320" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><canvas id="vuepress-canvas-cursor"></canvas><!----><div class="RibbonAnimation"></div><!----><div class="Sakura" data-v-248d85d6><canvas id="canvas_sakura" style="z-index:2;" data-v-248d85d6></canvas></div></div></div>
    <script src="/assets/js/app.0d6df2e4.js" defer></script><script src="/assets/js/3.2c60df78.js" defer></script><script src="/assets/js/42.7690245a.js" defer></script>
  </body>
</html>
