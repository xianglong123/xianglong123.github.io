(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{334:function(a,s){a.exports="data:image/png;base64,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"},772:function(a,s,n){"use strict";n.r(s);var e=n(0),t=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"juc原子类cas-unsafe和原子类详解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#juc原子类cas-unsafe和原子类详解"}},[a._v("#")]),a._v(" JUC原子类CAS, Unsafe和原子类详解")]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("提示")]),a._v(" "),s("p",[a._v("LockSupport是锁中的基础，是一个提供锁机制的工具类，所以先对其进行分析。 @123")])]),a._v(" "),s("ul",[s("li",[a._v("JUC锁: LockSupport详解\n"),s("ul",[s("li",[a._v("带着BAT大厂的面试问题去理解")]),a._v(" "),s("li",[a._v("LockSupport简介")]),a._v(" "),s("li",[a._v("LockSupport源码分析\n"),s("ul",[s("li",[a._v("类的属性")]),a._v(" "),s("li",[a._v("类的构造函数")]),a._v(" "),s("li",[a._v("核心函数分析\n"),s("ul",[s("li",[a._v("park函数")]),a._v(" "),s("li",[a._v("parkNanos函数")]),a._v(" "),s("li",[a._v("parkUntil函数")]),a._v(" "),s("li",[a._v("unpark函数")])])])])]),a._v(" "),s("li",[a._v("LockSupport示例说明\n"),s("ul",[s("li",[a._v("使用wait/notify实现线程同步")]),a._v(" "),s("li",[a._v("使用park/unpark实现线程同步")]),a._v(" "),s("li",[a._v("中断响应")])])]),a._v(" "),s("li",[a._v("更深入的理解\n"),s("ul",[s("li",[a._v("Thread.sleep()和Object.wait()的区别")]),a._v(" "),s("li",[a._v("Object.wait()和Condition.await()的区别")]),a._v(" "),s("li",[a._v("Thread.sleep()和LockSupport.park()的区别")]),a._v(" "),s("li",[a._v("Object.wait()和LockSupport.park()的区别\n"),s("ul",[s("li",[a._v("如果在wait()之前执行了notify()会怎样?")]),a._v(" "),s("li",[a._v("如果在park()之前执行了unpark()会怎样?")])])]),a._v(" "),s("li",[a._v("LockSupport.park()会释放锁资源吗?")])])]),a._v(" "),s("li",[a._v("参考文章")])])])]),a._v(" "),s("h3",{attrs:{id:"带着bat大厂的面试问题去理解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#带着bat大厂的面试问题去理解"}},[a._v("#")]),a._v(" # 带着BAT大厂的面试问题去理解")]),a._v(" "),s("blockquote",[s("p",[a._v("提示")])]),a._v(" "),s("blockquote",[s("p",[a._v("请带着这些问题继续后文，会很大程度上帮助你更好的理解相关知识点。@123")])]),a._v(" "),s("ul",[s("li",[a._v("为什么LockSupport也是核心基础类? AQS框架借助于两个类：Unsafe(提供CAS操作)和LockSupport(提供park/unpark操作)")]),a._v(" "),s("li",[a._v("写出分别通过wait/notify和LockSupport的park/unpark实现同步?")]),a._v(" "),s("li",[a._v("LockSupport.park()会释放锁资源吗? 那么Condition.await()呢?")]),a._v(" "),s("li",[a._v("Thread.sleep()、Object.wait()、Condition.await()、LockSupport.park()的区别? 重点")]),a._v(" "),s("li",[a._v("如果在wait()之前执行了notify()会怎样?")]),a._v(" "),s("li",[a._v("如果在park()之前执行了unpark()会怎样?")])]),a._v(" "),s("h3",{attrs:{id:"locksupport简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#locksupport简介"}},[a._v("#")]),a._v(" # LockSupport简介")]),a._v(" "),s("blockquote",[s("p",[a._v("LockSupport用来创建锁和其他同步类的基本线程阻塞原语。简而言之，当调用LockSupport.park时，表示当前线程将会等待，直至获得许可，当调用LockSupport.unpark时，必须把等待获得许可的线程作为参数进行传递，好让此线程继续运行。")])]),a._v(" "),s("h3",{attrs:{id:"locksupport源码分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#locksupport源码分析"}},[a._v("#")]),a._v(" # LockSupport源码分析")]),a._v(" "),s("h3",{attrs:{id:"类的属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#类的属性"}},[a._v("#")]),a._v(" # 类的属性")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('public class LockSupport {\n    // Hotspot implementation via intrinsics API\n    private static final sun.misc.Unsafe UNSAFE;\n    // 表示内存偏移地址\n    private static final long parkBlockerOffset;\n    // 表示内存偏移地址\n    private static final long SEED;\n    // 表示内存偏移地址\n    private static final long PROBE;\n    // 表示内存偏移地址\n    private static final long SECONDARY;\n\n    static {\n        try {\n            // 获取Unsafe实例\n            UNSAFE = sun.misc.Unsafe.getUnsafe();\n            // 线程类类型\n            Class<?> tk = Thread.class;\n            // 获取Thread的parkBlocker字段的内存偏移地址\n            parkBlockerOffset = UNSAFE.objectFieldOffset\n                (tk.getDeclaredField("parkBlocker"));\n            // 获取Thread的threadLocalRandomSeed字段的内存偏移地址\n            SEED = UNSAFE.objectFieldOffset\n                (tk.getDeclaredField("threadLocalRandomSeed"));\n            // 获取Thread的threadLocalRandomProbe字段的内存偏移地址\n            PROBE = UNSAFE.objectFieldOffset\n                (tk.getDeclaredField("threadLocalRandomProbe"));\n            // 获取Thread的threadLocalRandomSecondarySeed字段的内存偏移地址\n            SECONDARY = UNSAFE.objectFieldOffset\n                (tk.getDeclaredField("threadLocalRandomSecondarySeed"));\n        } catch (Exception ex) { throw new Error(ex); }\n    }\n}\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br")])]),s("blockquote",[s("p",[a._v("说明: UNSAFE字段表示sun.misc.Unsafe类，查看其源码，点击在这里，一般程序中不允许直接调用，而long型的表示实例对象相应字段在内存中的偏移地址，可以通过该偏移地址获取或者设置该字段的值。")])]),a._v(" "),s("h3",{attrs:{id:"类的构造函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#类的构造函数"}},[a._v("#")]),a._v(" # 类的构造函数")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("// 私有构造函数，无法被实例化\nprivate LockSupport() {}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("blockquote",[s("p",[a._v("说明: LockSupport只有一个私有构造函数，无法被实例化。")])]),a._v(" "),s("h3",{attrs:{id:"核心函数分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#核心函数分析"}},[a._v("#")]),a._v(" # 核心函数分析")]),a._v(" "),s("blockquote",[s("p",[a._v("在分析LockSupport函数之前，先引入sun.misc.Unsafe类中的park和unpark函数，因为LockSupport的核心函数都是基于Unsafe类中定义的park和unpark函数，下面给出两个函数的定义:")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public native void park(boolean isAbsolute, long time);\npublic native void unpark(Thread thread);\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("blockquote",[s("p",[a._v("说明: 对两个函数的说明如下:")])]),a._v(" "),s("ul",[s("li",[s("blockquote",[s("p",[a._v("park函数，阻塞线程，并且该线程在下列情况发生之前都会被阻塞: ① 调用unpark函数，释放该线程的许可。② 该线程被中断。③ 设置的时间到了。并且，当time为绝对时间时，isAbsolute为true，否则，isAbsolute为false。当time为0时，表示无限等待，直到unpark发生。")])])]),a._v(" "),s("li",[s("blockquote",[s("p",[a._v("unpark函数，释放线程的许可，即激活调用park后阻塞的线程。这个函数不是安全的，调用这个函数时要确保线程依旧存活。")])])])]),a._v(" "),s("h4",{attrs:{id:"park函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#park函数"}},[a._v("#")]),a._v(" # park函数")]),a._v(" "),s("blockquote",[s("p",[a._v("park函数有两个重载版本，方法摘要如下")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public static void park()；\npublic static void park(Object blocker)；\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("blockquote",[s("p",[a._v("说明: 两个函数的区别在于park()函数没有没有blocker，即没有设置线程的parkBlocker字段。park(Object)型函数如下。")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public static void park(Object blocker) {\n    // 获取当前线程\n    Thread t = Thread.currentThread();\n    // 设置Blocker\n    setBlocker(t, blocker);\n    // 获取许可\n    UNSAFE.park(false, 0L);\n    // 重新可运行后再此设置Blocker\n    setBlocker(t, null);\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br")])]),s("blockquote",[s("p",[a._v("说明: 调用park函数时，首先获取当前线程，然后设置当前线程的parkBlocker字段，即调用setBlocker函数，之后调用Unsafe类的park函数，之后再调用setBlocker函数。那么问题来了，为什么要在此park函数中要调用两次setBlocker函数呢? 原因其实很简单，调用park函数时，当前线程首先设置好parkBlocker字段，然后再调用Unsafe的park函数，此后，当前线程就已经阻塞了，等待该线程的unpark函数被调用，所以后面的一个setBlocker函数无法运行，unpark函数被调用，该线程获得许可后，就可以继续运行了，也就运行第二个setBlocker，把该线程的parkBlocker字段设置为null，这样就完成了整个park函数的逻辑。如果没有第二个setBlocker，那么之后没有调用park(Object blocker)，而直接调用getBlocker函数，得到的还是前一个park(Object blocker)设置的blocker，显然是不符合逻辑的。总之，必须要保证在park(Object blocker)整个函数执行完后，该线程的parkBlocker字段又恢复为null。所以，park(Object)型函数里必须要调用setBlocker函数两次。setBlocker方法如下。")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("private static void setBlocker(Thread t, Object arg) {\n    // 设置线程t的parkBlocker字段的值为arg\n    UNSAFE.putObject(t, parkBlockerOffset, arg);\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("blockquote",[s("p",[a._v("说明: 此方法用于设置线程t的parkBlocker字段的值为arg。")])]),a._v(" "),s("blockquote",[s("p",[a._v("另外一个无参重载版本，park()函数如下。")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public static void park() {\n    // 获取许可，设置时间为无限长，直到可以获取许可\n    UNSAFE.park(false, 0L);\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("blockquote",[s("p",[a._v("说明: 调用了park函数后，会禁用当前线程，除非许可可用。在以下三种情况之一发生之前，当前线程都将处于休眠状态，即下列情况发生时，当前线程会获取许可，可以继续运行。")])]),a._v(" "),s("ul",[s("li",[a._v("其他某个线程将当前线程作为目标调用 unpark。")]),a._v(" "),s("li",[a._v("其他某个线程中断当前线程。")]),a._v(" "),s("li",[a._v("该调用不合逻辑地(即毫无理由地)返回。")])]),a._v(" "),s("h4",{attrs:{id:"parknanos函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#parknanos函数"}},[a._v("#")]),a._v(" # parkNanos函数")]),a._v(" "),s("blockquote",[s("p",[a._v("此函数表示在许可可用前禁用当前线程，并最多等待指定的等待时间。具体函数如下。")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public static void parkNanos(Object blocker, long nanos) {\n    if (nanos > 0) { // 时间大于0\n        // 获取当前线程\n        Thread t = Thread.currentThread();\n        // 设置Blocker\n        setBlocker(t, blocker);\n        // 获取许可，并设置了时间\n        UNSAFE.park(false, nanos);\n        // 设置许可\n        setBlocker(t, null);\n    }\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br")])]),s("blockquote",[s("p",[a._v("说明: 该函数也是调用了两次setBlocker函数，nanos参数表示相对时间，表示等待多长时间。")])]),a._v(" "),s("h4",{attrs:{id:"parkuntil函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#parkuntil函数"}},[a._v("#")]),a._v(" # parkUntil函数")]),a._v(" "),s("blockquote",[s("p",[a._v("此函数表示在指定的时限前禁用当前线程，除非许可可用, 具体函数如下:")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public static void parkUntil(Object blocker, long deadline) {\n    // 获取当前线程\n    Thread t = Thread.currentThread();\n    // 设置Blocker\n    setBlocker(t, blocker);\n    UNSAFE.park(true, deadline);\n    // 设置Blocker为null\n    setBlocker(t, null);\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br")])]),s("blockquote",[s("p",[a._v("说明: 该函数也调用了两次setBlocker函数，deadline参数表示绝对时间，表示指定的时间。")])]),a._v(" "),s("h4",{attrs:{id:"unpark函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#unpark函数"}},[a._v("#")]),a._v(" # unpark函数")]),a._v(" "),s("blockquote",[s("p",[a._v("此函数表示如果给定线程的许可尚不可用，则使其可用。如果线程在 park 上受阻塞，则它将解除其阻塞状态。否则，保证下一次调用 park 不会受阻塞。如果给定线程尚未启动，则无法保证此操作有任何效果。具体函数如下:")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("public static void unpark(Thread thread) {\n    if (thread != null) // 线程为不空\n        UNSAFE.unpark(thread); // 释放该线程许可\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("blockquote",[s("p",[a._v("说明: 释放许可，指定线程可以继续运行。")])]),a._v(" "),s("h3",{attrs:{id:"locksupport示例说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#locksupport示例说明"}},[a._v("#")]),a._v(" # LockSupport示例说明")]),a._v(" "),s("h3",{attrs:{id:"使用wait-notify实现线程同步"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用wait-notify实现线程同步"}},[a._v("#")]),a._v(" # 使用wait/notify实现线程同步")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('class MyThread extends Thread {\n\n    public void run() {\n        synchronized (this) {\n            System.out.println("before notify");            \n            notify();\n            System.out.println("after notify");    \n        }\n    }\n}\n\npublic class WaitAndNotifyDemo {\n    public static void main(String[] args) throws InterruptedException {\n        MyThread myThread = new MyThread();            \n        synchronized (myThread) {\n            try {        \n                myThread.start();\n                // 主线程睡眠3s\n                Thread.sleep(3000);\n                System.out.println("before wait");\n                // 阻塞主线程\n                myThread.wait();\n                System.out.println("after wait");\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }            \n        }        \n    }\n}\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br")])]),s("blockquote",[s("p",[a._v("运行结果")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("before wait\nbefore notify\nafter notify\nafter wait\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("blockquote",[s("p",[a._v("说明: 具体的流程图如下")])]),a._v(" "),s("blockquote",[s("p",[s("img",{attrs:{src:n(334),alt:""}})])]),a._v(" "),s("blockquote",[s("p",[a._v("使用wait/notify实现同步时，必须先调用wait，后调用notify，如果先调用notify，再调用wait，将起不了作用。具体代码如下")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('class MyThread extends Thread {\n    public void run() {\n        synchronized (this) {\n            System.out.println("before notify");            \n            notify();\n            System.out.println("after notify");    \n        }\n    }\n}\n\npublic class WaitAndNotifyDemo {\n    public static void main(String[] args) throws InterruptedException {\n        MyThread myThread = new MyThread();        \n        myThread.start();\n        // 主线程睡眠3s\n        Thread.sleep(3000);\n        synchronized (myThread) {\n            try {        \n                System.out.println("before wait");\n                // 阻塞主线程\n                myThread.wait();\n                System.out.println("after wait");\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }            \n        }        \n    }\n}\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br")])]),s("blockquote",[s("p",[a._v("运行结果:")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("before notify\nafter notify\nbefore wait\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("blockquote",[s("p",[a._v("说明: 由于先调用了notify，再调用的wait，此时主线程还是会一直阻塞。")])]),a._v(" "),s("h3",{attrs:{id:"使用park-unpark实现线程同步"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用park-unpark实现线程同步"}},[a._v("#")]),a._v(" # 使用park/unpark实现线程同步")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('import java.util.concurrent.locks.LockSupport;\n\nclass MyThread extends Thread {\n    private Object object;\n\n    public MyThread(Object object) {\n        this.object = object;\n    }\n\n    public void run() {\n        System.out.println("before unpark");\n        try {\n            Thread.sleep(1000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        // 获取blocker\n        System.out.println("Blocker info " + LockSupport.getBlocker((Thread) object));\n        // 释放许可\n        LockSupport.unpark((Thread) object);\n        // 休眠500ms，保证先执行park中的setBlocker(t, null);\n        try {\n            Thread.sleep(500);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        // 再次获取blocker\n        System.out.println("Blocker info " + LockSupport.getBlocker((Thread) object));\n\n        System.out.println("after unpark");\n    }\n}\n\npublic class test {\n    public static void main(String[] args) {\n        MyThread myThread = new MyThread(Thread.currentThread());\n        myThread.start();\n        System.out.println("before park");\n        // 获取许可\n        LockSupport.park("ParkAndUnparkDemo");\n        System.out.println("after park");\n    }\n}\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br"),s("span",{staticClass:"line-number"},[a._v("34")]),s("br"),s("span",{staticClass:"line-number"},[a._v("35")]),s("br"),s("span",{staticClass:"line-number"},[a._v("36")]),s("br"),s("span",{staticClass:"line-number"},[a._v("37")]),s("br"),s("span",{staticClass:"line-number"},[a._v("38")]),s("br"),s("span",{staticClass:"line-number"},[a._v("39")]),s("br"),s("span",{staticClass:"line-number"},[a._v("40")]),s("br"),s("span",{staticClass:"line-number"},[a._v("41")]),s("br"),s("span",{staticClass:"line-number"},[a._v("42")]),s("br"),s("span",{staticClass:"line-number"},[a._v("43")]),s("br")])]),s("blockquote",[s("p",[a._v("运行结果:")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("before park\nbefore unpark\nBlocker info ParkAndUnparkDemo\nafter park\nBlocker info null\nafter unpark\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("blockquote",[s("p",[a._v("说明: 本程序先执行park，然后在执行unpark，进行同步，并且在unpark的前后都调用了getBlocker，可以看到两次的结果不一样，并且第二次调用的结果为null，这是因为在调用unpark之后，执行了Lock.park(Object blocker)函数中的setBlocker(t, null)函数，所以第二次调用getBlocker时为null。")])]),a._v(" "),s("blockquote",[s("p",[a._v("上例是先调用park，然后调用unpark，现在修改程序，先调用unpark，然后调用park，看能不能正确同步。具体代码如下")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('import java.util.concurrent.locks.LockSupport;\n\nclass MyThread extends Thread {\n    private Object object;\n\n    public MyThread(Object object) {\n        this.object = object;\n    }\n\n    public void run() {\n        System.out.println("before unpark");        \n        // 释放许可\n        LockSupport.unpark((Thread) object);\n        System.out.println("after unpark");\n    }\n}\n\npublic class ParkAndUnparkDemo {\n    public static void main(String[] args) {\n        MyThread myThread = new MyThread(Thread.currentThread());\n        myThread.start();\n        try {\n            // 主线程睡眠3s\n            Thread.sleep(3000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        System.out.println("before park");\n        // 获取许可\n        LockSupport.park("ParkAndUnparkDemo");\n        System.out.println("after park");\n    }\n}\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br")])]),s("blockquote",[s("p",[a._v("运行结果:")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("before unpark\nafter unpark\nbefore park\nafter park\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("blockquote",[s("p",[a._v("说明: 可以看到，在先调用unpark，再调用park时，仍能够正确实现同步，不会造成由wait/notify调用顺序不当所引起的阻塞。因此park/unpark相比wait/notify更加的灵活。")])]),a._v(" "),s("h3",{attrs:{id:"中断响应"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#中断响应"}},[a._v("#")]),a._v(" # 中断响应")]),a._v(" "),s("blockquote",[s("p",[a._v("看下面示例")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('import java.util.concurrent.locks.LockSupport;\n\nclass MyThread extends Thread {\n    private Object object;\n\n    public MyThread(Object object) {\n        this.object = object;\n    }\n\n    public void run() {\n        System.out.println("before interrupt");        \n        try {\n            // 休眠3s\n            Thread.sleep(3000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }    \n        Thread thread = (Thread) object;\n        // 中断线程\n        thread.interrupt();\n        System.out.println("after interrupt");\n    }\n}\n\npublic class InterruptDemo {\n    public static void main(String[] args) {\n        MyThread myThread = new MyThread(Thread.currentThread());\n        myThread.start();\n        System.out.println("before park");\n        // 获取许可\n        LockSupport.park("ParkAndUnparkDemo");\n        System.out.println("after park");\n    }\n}\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br"),s("span",{staticClass:"line-number"},[a._v("34")]),s("br")])]),s("blockquote",[s("p",[a._v("运行结果:")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("before park\nbefore interrupt\nafter interrupt\nafter park\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("blockquote",[s("p",[a._v("说明: 可以看到，在主线程调用park阻塞后，在myThread线程中发出了中断信号，此时主线程会继续运行，也就是说明此时interrupt起到的作用与unpark一样。")])]),a._v(" "),s("h3",{attrs:{id:"更深入的理解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更深入的理解"}},[a._v("#")]),a._v(" # 更深入的理解")]),a._v(" "),s("h3",{attrs:{id:"thread-sleep-和object-wait-的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#thread-sleep-和object-wait-的区别"}},[a._v("#")]),a._v(" # Thread.sleep()和Object.wait()的区别")]),a._v(" "),s("blockquote",[s("p",[a._v("首先，我们先来看看Thread.sleep()和Object.wait()的区别，这是一个烂大街的题目了，大家应该都能说上来两点。")])]),a._v(" "),s("ul",[s("li",[a._v("Thread.sleep()不会释放占有的锁，Object.wait()会释放占有的锁；")]),a._v(" "),s("li",[a._v("Thread.sleep()必须传入时间，Object.wait()可传可不传，不传表示一直阻塞下去；")]),a._v(" "),s("li",[a._v("Thread.sleep()到时间了会自动唤醒，然后继续执行；")]),a._v(" "),s("li",[a._v("Object.wait()不带时间的，需要另一个线程使用Object.notify()唤醒；")]),a._v(" "),s("li",[a._v("Object.wait()带时间的，假如没有被notify，到时间了会自动唤醒，这时又分好两种情况，一是立即获取到了锁，线程自然会继续执行；二是没有立即获取锁，线程进入同步队列等待获取锁；")])]),a._v(" "),s("blockquote",[s("p",[a._v("其实，他们俩最大的区别就是Thread.sleep()不会释放锁资源，Object.wait()会释放锁资源。")])]),a._v(" "),s("h3",{attrs:{id:"object-wait-和condition-await-的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#object-wait-和condition-await-的区别"}},[a._v("#")]),a._v(" # Object.wait()和Condition.await()的区别")]),a._v(" "),s("blockquote",[s("p",[a._v("Object.wait()和Condition.await()的原理是基本一致的，不同的是Condition.await()底层是调用LockSupport.park()来实现阻塞当前线程的。")])]),a._v(" "),s("blockquote",[s("p",[a._v("实际上，它在阻塞当前线程之前还干了两件事，一是把当前线程添加到条件队列中，二是完全释放锁，也就是让state状态变量变为0，然后才是调用LockSupport.park()阻塞当前线程。")])]),a._v(" "),s("h3",{attrs:{id:"thread-sleep-和locksupport-park-的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#thread-sleep-和locksupport-park-的区别"}},[a._v("#")]),a._v(" # Thread.sleep()和LockSupport.park()的区别")]),a._v(" "),s("blockquote",[s("p",[a._v("LockSupport.park()还有几个兄弟方法——parkNanos()、parkUtil()等，我们这里说的park()方法统称这一类方法。")])]),a._v(" "),s("ul",[s("li",[a._v("从功能上来说，Thread.sleep()和LockSupport.park()方法类似，都是阻塞当前线程的执行，且都不会释放当前线程占有的锁资源；")]),a._v(" "),s("li",[a._v("Thread.sleep()没法从外部唤醒，只能自己醒过来；")]),a._v(" "),s("li",[a._v("LockSupport.park()方法可以被另一个线程调用LockSupport.unpark()方法唤醒；")]),a._v(" "),s("li",[a._v("Thread.sleep()方法声明上抛出了InterruptedException中断异常，所以调用者需要捕获这个异常或者再抛出；")]),a._v(" "),s("li",[a._v("LockSupport.park()方法不需要捕获中断异常；")]),a._v(" "),s("li",[a._v("Thread.sleep()本身就是一个native方法；")]),a._v(" "),s("li",[a._v("LockSupport.park()底层是调用的Unsafe的native方法；")])]),a._v(" "),s("h3",{attrs:{id:"object-wait-和locksupport-park-的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#object-wait-和locksupport-park-的区别"}},[a._v("#")]),a._v(" # Object.wait()和LockSupport.park()的区别")]),a._v(" "),s("blockquote",[s("p",[a._v("二者都会阻塞当前线程的运行，他们有什么区别呢? 经过上面的分析相信你一定很清楚了，真的吗? 往下看！")])]),a._v(" "),s("ul",[s("li",[a._v("Object.wait()方法需要在synchronized块中执行；")]),a._v(" "),s("li",[a._v("LockSupport.park()可以在任意地方执行；")]),a._v(" "),s("li",[a._v("Object.wait()方法声明抛出了中断异常，调用者需要捕获或者再抛出；")]),a._v(" "),s("li",[a._v("LockSupport.park()不需要捕获中断异常；")]),a._v(" "),s("li",[a._v("Object.wait()不带超时的，需要另一个线程执行notify()来唤醒，但不一定继续执行后续内容；")]),a._v(" "),s("li",[a._v("LockSupport.park()不带超时的，需要另一个线程执行unpark()来唤醒，一定会继续执行后续内容；")])]),a._v(" "),s("blockquote",[s("p",[a._v("park()/unpark()底层的原理是二元信号量，你可以把它相像成只有一个许可证的Semaphore，只不过这个信号量在重复执行unpark()的时候也不会再增加许可证，最多只有一个许可证。")])]),a._v(" "),s("h4",{attrs:{id:"如果在wait-之前执行了notify-会怎样"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如果在wait-之前执行了notify-会怎样"}},[a._v("#")]),a._v(" # 如果在wait()之前执行了notify()会怎样?")]),a._v(" "),s("blockquote",[s("p",[a._v("如果当前的线程不是此对象锁的所有者，却调用该对象的notify()或wait()方法时抛出IllegalMonitorStateException异常；")])]),a._v(" "),s("blockquote",[s("p",[a._v("如果当前线程是此对象锁的所有者，wait()将一直阻塞，因为后续将没有其它notify()唤醒它。")])]),a._v(" "),s("h4",{attrs:{id:"如果在park-之前执行了unpark-会怎样"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如果在park-之前执行了unpark-会怎样"}},[a._v("#")]),a._v(" # 如果在park()之前执行了unpark()会怎样?")]),a._v(" "),s("blockquote",[s("p",[a._v("线程不会被阻塞，直接跳过park()，继续执行后续内容")])]),a._v(" "),s("h3",{attrs:{id:"locksupport-park-会释放锁资源吗"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#locksupport-park-会释放锁资源吗"}},[a._v("#")]),a._v(" # LockSupport.park()会释放锁资源吗?")]),a._v(" "),s("blockquote",[s("p",[a._v("不会，它只负责阻塞当前线程，释放锁资源实际上是在Condition的await()方法中实现的。")])]),a._v(" "),s("h3",{attrs:{id:"参考文章"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[a._v("#")]),a._v(" # 参考文章")]),a._v(" "),s("ul",[s("li",[a._v("文章主要参考自leesf的https://www.cnblogs.com/leesf456/p/5347293.html，在此基础上做了增改。")]),a._v(" "),s("li",[a._v("https://blog.csdn.net/tangtong1/article/details/102829724")])])])}),[],!1,null,null,null);s.default=t.exports}}]);