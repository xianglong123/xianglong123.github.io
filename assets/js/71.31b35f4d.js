(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{457:function(s,a,e){s.exports=e.p+"assets/img/java-stream-functions.d46a084c.png"},748:function(s,a,e){"use strict";e.r(a);var t=e(0),n=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"java-8-函数编程-lambda表达式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#java-8-函数编程-lambda表达式"}},[s._v("#")]),s._v(" Java 8 - 函数编程(lambda表达式)")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("我们关心的是如何写出好代码，而不是符合函数编程风格的代码。 @123")])]),s._v(" "),a("ul",[a("li",[s._v("Java 8 - 函数编程(lambda表达式)\n"),a("ul",[a("li",[s._v("简介")]),s._v(" "),a("li",[s._v("lambda表达式")]),s._v(" "),a("li",[s._v("分类\n"),a("ul",[a("li",[s._v("惰性求值方法")]),s._v(" "),a("li",[s._v("及早求值方法")])])]),s._v(" "),a("li",[s._v("stream & parallelStream\n"),a("ul",[a("li",[s._v("stream & parallelStream")]),s._v(" "),a("li",[s._v("parallelStream原理:")]),s._v(" "),a("li",[s._v("stream与parallelStream性能测试对比")]),s._v(" "),a("li",[s._v("Stream中常用方法如下:")])])]),s._v(" "),a("li",[s._v("常用例子\n"),a("ul",[a("li",[s._v("匿名类简写")]),s._v(" "),a("li",[s._v("forEach")]),s._v(" "),a("li",[s._v("方法引用")]),s._v(" "),a("li",[s._v("Filter & Predicate")]),s._v(" "),a("li",[s._v("Map&Reduce")]),s._v(" "),a("li",[s._v("Collectors")]),s._v(" "),a("li",[s._v("flatMap")]),s._v(" "),a("li",[s._v("distinct")]),s._v(" "),a("li",[s._v("count")]),s._v(" "),a("li",[s._v("Match")]),s._v(" "),a("li",[s._v("min,max,summaryStatistics")]),s._v(" "),a("li",[s._v("peek")])])]),s._v(" "),a("li",[s._v("FunctionalInterface\n"),a("ul",[a("li",[s._v("理解注解 @FunctionInterface")]),s._v(" "),a("li",[s._v("自定义函数接口")]),s._v(" "),a("li",[s._v("内置四大函数接口")])])]),s._v(" "),a("li",[s._v("一些例子")]),s._v(" "),a("li",[s._v("参考资料")])])])]),s._v(" "),a("h3",{attrs:{id:"简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[s._v("#")]),s._v(" # 简介")]),s._v(" "),a("blockquote",[a("blockquote",[a("p",[s._v("在Java世界里面，面向对象还是主流思想，对于习惯了面向对象编程的开发者来说，抽象的概念并不陌生。面向对象编程是对数据进行抽象，而函数式编程是对行为进行抽象。现实世界中，数据和行为并存，程序也是如此，因此这两种编程方式我们都得学。")])])]),s._v(" "),a("blockquote",[a("blockquote",[a("p",[s._v("这种新的抽象方式还有其他好处。很多人不总是在编写性能优先的代码，对于这些人来说，函数式编程带来的好处尤为明显。程序员能编写出更容易阅读的代码——这种代码更多地表达了业务逻辑，而不是从机制上如何实现。易读的代码也易于维护、更可靠、更不容易出错。")])])]),s._v(" "),a("blockquote",[a("blockquote",[a("p",[s._v("在写回调函数和事件处理器时，程序员不必再纠缠于匿名内部类的冗繁和可读性，函数式编程让事件处理系统变得更加简单。能将函数方便地传递也让编写惰性代码变得容易，只有在真正需要的时候，才初始化变量的值。")])])]),s._v(" "),a("blockquote",[a("p",[s._v("面向对象编程是对数据进行抽象；函数式编程是对行为进行抽象。")])]),s._v(" "),a("blockquote",[a("p",[s._v("核心思想: 使用不可变值和函数，函数对一个值进行处理，映射成另一个值。")])]),s._v(" "),a("blockquote",[a("p",[s._v("对核心类库的改进主要包括集合类的API和新引入的流Stream。流使程序员可以站在更高的抽象层次上对集合进行操作。")])]),s._v(" "),a("h3",{attrs:{id:"lambda表达式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lambda表达式"}},[s._v("#")]),s._v(" # lambda表达式")]),s._v(" "),a("ul",[a("li",[a("blockquote",[a("p",[s._v("lambda表达式仅能放入如下代码: 预定义使用了 @Functional 注释的函数式接口，自带一个抽象函数的方法，或者SAM(Single Abstract Method 单个抽象方法)类型。这些称为lambda表达式的目标类型，可以用作返回类型，或lambda目标代码的参数。例如，若一个方法接收Runnable、Comparable或者 Callable 接口，都有单个抽象方法，可以传入lambda表达式。类似的，如果一个方法接受声明于 java.util.function 包内的接口，例如 Predicate、Function、Consumer 或 Supplier，那么可以向其传lambda表达式。")])])]),s._v(" "),a("li",[a("blockquote",[a("p",[s._v("lambda表达式内可以使用"),a("code",[s._v("方法引用")]),s._v("，仅当该方法不修改lambda表达式提供的参数。本例中的lambda表达式可以换为方法引用，因为这仅是一个参数相同的简单方法调用。")])])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("list.forEach(n -> System.out.println(n)); \nlist.forEach(System.out::println);  // 使用方法引用\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[s._v("然而，若对参数有任何修改，则不能使用方法引用，而需键入完整地lambda表达式，如下所示:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('list.forEach((String s) -> System.out.println("*" + s + "*"));\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("事实上，可以省略这里的lambda参数的类型声明，编译器可以从列表的类属性推测出来。")])]),s._v(" "),a("ul",[a("li",[a("blockquote",[a("p",[s._v("lambda内部可以使用静态、非静态和局部变量，这称为lambda内的变量捕获。")])])]),s._v(" "),a("li",[a("blockquote",[a("p",[s._v("Lambda表达式在Java中又称为闭包或匿名函数，所以如果有同事把它叫闭包的时候，不用惊讶。")])])]),s._v(" "),a("li",[a("blockquote",[a("p",[s._v("Lambda方法在编译器内部被翻译成私有方法，并派发 invokedynamic 字节码指令来进行调用。可以使用JDK中的 javap 工具来反编译class文件。使用 javap -p 或 javap -c -v 命令来看一看lambda表达式生成的字节码。大致应该长这样:")])])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("private static java.lang.Object lambda$0(java.lang.String);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("lambda表达式有个限制，那就是只能引用 final 或 final 局部变量，这就是说不能在lambda内部修改定义在域外的变量。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("List<Integer> primes = Arrays.asList(new Integer[]{2, 3,5,7});\nint factor = 2;\nprimes.forEach(element -> { factor++; });\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("blockquote",[a("p",[s._v('Compile time error : "local variables referenced from a lambda expression must be final or effectively final" 另外，只是访问它而不作修改是可以的，如下所示:')])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("List<Integer> primes = Arrays.asList(new Integer[]{2, 3,5,7});\nint factor = 2;\nprimes.forEach(element -> { System.out.println(factor*element); });\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分类"}},[s._v("#")]),s._v(" # 分类")]),s._v(" "),a("h3",{attrs:{id:"惰性求值方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#惰性求值方法"}},[s._v("#")]),s._v(" # 惰性求值方法")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('lists.stream().filter(f -> f.getName().equals("p1"))\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("如上示例，这行代码并未做什么实际性的工作，filter只是"),a("code",[s._v("描述")]),s._v("了Stream，"),a("code",[s._v("没有产生新的集合")]),s._v("。")])]),s._v(" "),a("blockquote",[a("p",[s._v("如果是多个条件组合，可以通过代码块{}")])]),s._v(" "),a("h3",{attrs:{id:"及早求值方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#及早求值方法"}},[s._v("#")]),s._v(" # 及早求值方法")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('List<Person> list2 = lists.stream().filter(f -> f.getName().equals("p1")).collect(Collectors.toList());\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("如上示例，collect最终会从Stream产生新值，拥有终止操作。")])]),s._v(" "),a("blockquote",[a("p",[s._v("理想方式是形成一个惰性求值的链，最后用一个及早求值的操作返回想要的结果。与建造者模式相似，建造者模式先是使用一系列操作设置属性和配置，最后调用build方法，创建对象。")])]),s._v(" "),a("h3",{attrs:{id:"stream-parallelstream"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#stream-parallelstream"}},[s._v("#")]),s._v(" # stream & parallelStream")]),s._v(" "),a("h3",{attrs:{id:"stream-parallelstream-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#stream-parallelstream-2"}},[s._v("#")]),s._v(" # stream & parallelStream")]),s._v(" "),a("blockquote",[a("p",[s._v("每个Stream都有两种模式: 顺序执行和并行执行。")])]),s._v(" "),a("blockquote",[a("p",[s._v("顺序流:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("List <Person> people = list.getStream.collect(Collectors.toList());\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("并行流:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("List <Person> people = list.getStream.parallel().collect(Collectors.toList());\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("顾名思义，当使用顺序方式去遍历时，每个item读完后再读下一个item。而使用并行去遍历时，数组会被分成多个段，其中每一个都在不同的线程中处理，然后将结果一起输出。")])]),s._v(" "),a("h3",{attrs:{id:"parallelstream原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parallelstream原理"}},[s._v("#")]),s._v(" # parallelStream原理:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("List originalList = someData;\nsplit1 = originalList(0, mid);//将数据分小部分\nsplit2 = originalList(mid,end);\nnew Runnable(splitprocess());//小部分执行操作\nnew Runnable(splitprocess());\nList revisedList = split1 + split2;//将结果合并\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("blockquote",[a("p",[s._v("大家对hadoop有稍微了解就知道，里面的 MapReduce 本身就是用于并行处理大数据集的软件框架，其 处理大数据的核心思想就是大而化小，分配到不同机器去运行map，最终通过reduce将所有机器的结果结合起来得到一个最终结果，与MapReduce不同，Stream则是利用多核技术可将大数据通过多核并行处理，而MapReduce则可以分布式的。")])]),s._v(" "),a("h3",{attrs:{id:"stream与parallelstream性能测试对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#stream与parallelstream性能测试对比"}},[s._v("#")]),s._v(" # stream与parallelStream性能测试对比")]),s._v(" "),a("blockquote",[a("p",[s._v("如果是多核机器，理论上并行流则会比顺序流快上一倍，下面是测试代码")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('long t0 = System.nanoTime();\n\n//初始化一个范围100万整数流,求能被2整除的数字，toArray()是终点方法\n\nint a[]=IntStream.range(0, 1_000_000).filter(p -> p % 2==0).toArray();\n\nlong t1 = System.nanoTime();\n\n//和上面功能一样，这里是用并行流来计算\n\nint b[]=IntStream.range(0, 1_000_000).parallel().filter(p -> p % 2==0).toArray();\n\nlong t2 = System.nanoTime();\n\n//我本机的结果是serial: 06s, parallel 02s，证明并行流确实比顺序流快\n\nSystem.out.printf("serial: %.2fs, parallel %.2fs%n", (t1 - t0) * 1e-9, (t2 - t1) * 1e-9);\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h3",{attrs:{id:"stream中常用方法如下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#stream中常用方法如下"}},[s._v("#")]),s._v(" # Stream中常用方法如下:")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("stream()")]),s._v(", "),a("code",[s._v("parallelStream()")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("filter()")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("findAny()")]),s._v(" "),a("code",[s._v("findFirst()")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("sort")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("forEach")]),s._v(" void")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("map(), reduce()")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("flatMap()")]),s._v(" - 将多个Stream连接成一个Stream")])]),s._v(" "),a("li",[a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("collect(Collectors.toList())\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("distinct")]),s._v(", "),a("code",[s._v("limit")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("count")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("min")]),s._v(", "),a("code",[s._v("max")]),s._v(", "),a("code",[s._v("summaryStatistics")])])])]),s._v(" "),a("blockquote",[a("p",[s._v("看下所有API:")])]),s._v(" "),a("blockquote",[a("p",[a("img",{attrs:{src:e(457),alt:""}})])]),s._v(" "),a("h3",{attrs:{id:"常用例子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用例子"}},[s._v("#")]),s._v(" # 常用例子")]),s._v(" "),a("h3",{attrs:{id:"匿名类简写"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#匿名类简写"}},[s._v("#")]),s._v(" # 匿名类简写")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('new Thread( () -> System.out.println("In Java8, Lambda expression rocks !!") ).start();\n\n// 用法\n(params) -> expression\n(params) -> statement\n(params) -> { statements }\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"foreach"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#foreach"}},[s._v("#")]),s._v(" # forEach")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// forEach\nList features = Arrays.asList("Lambdas", "Default Method", "Stream API", "Date and Time API");\nfeatures.forEach(n -> System.out.println(n));\n \n// 使用Java 8的方法引用更方便，方法引用由::双冒号操作符标示，\nfeatures.forEach(System.out::println);\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"方法引用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法引用"}},[s._v("#")]),s._v(" # 方法引用")]),s._v(" "),a("blockquote",[a("p",[a("em",[s._v("构造引用")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// Supplier<Student> s = () -> new Student();\nSupplier<Student> s = Student::new;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[a("em",[s._v("对象::实例方法")]),s._v(" Lambda表达式的(形参列表)与实例方法的(实参列表)类型，个数是对应")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// set.forEach(t -> System.out.println(t));\nset.forEach(System.out::println);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[a("em",[s._v("类名::静态方法")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// Stream<Double> stream = Stream.generate(() -> Math.random());\nStream<Double> stream = Stream.generate(Math::random);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[a("em",[s._v("类名::实例方法")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("//  TreeSet<String> set = new TreeSet<>((s1,s2) -> scompareTo(s2));\n/*  这里如果使用第一句话，编译器会有提示: Can be replaced with Comparator.naturalOrder，这句话告诉我们\n  String已经重写了compareTo()方法，在这里写是多此一举，这里为什么这么写，是因为为了体现下面\n  这句编译器的提示: Lambda can be replaced with method reference。好了，下面的这句就是改写成方法引用之后: \n*/\nTreeSet<String> set = new TreeSet<>(String::compareTo);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"filter-predicate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#filter-predicate"}},[s._v("#")]),s._v(" # Filter & Predicate")]),s._v(" "),a("blockquote",[a("p",[s._v("常规用法")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('public static void main(args[]){\n    List languages = Arrays.asList("Java", "Scala", "C++", "Haskell", "Lisp");\n \n    System.out.println("Languages which starts with J :");\n    filter(languages, (str)->str.startsWith("J"));\n \n    System.out.println("Languages which ends with a ");\n    filter(languages, (str)->str.endsWith("a"));\n \n    System.out.println("Print all languages :");\n    filter(languages, (str)->true);\n \n    System.out.println("Print no language : ");\n    filter(languages, (str)->false);\n \n    System.out.println("Print language whose length greater than 4:");\n    filter(languages, (str)->str.length() > 4);\n}\n \npublic static void filter(List names, Predicate condition) {\n    names.stream().filter((name) -> (condition.test(name))).forEach((name) -> {\n        System.out.println(name + " ");\n    });\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("blockquote",[a("p",[s._v("多个Predicate组合filter")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// 可以用and()、or()和xor()逻辑函数来合并Predicate，\n// 例如要找到所有以J开始，长度为四个字母的名字，你可以合并两个Predicate并传入\nPredicate<String> startsWithJ = (n) -> n.startsWith("J");\nPredicate<String> fourLetterLong = (n) -> n.length() == 4;\nnames.stream()\n    .filter(startsWithJ.and(fourLetterLong))\n    .forEach((n) -> System.out.print("nName, which starts with \'J\' and four letter long is : " + n));\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"map-reduce"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#map-reduce"}},[s._v("#")]),s._v(" # Map&Reduce")]),s._v(" "),a("blockquote",[a("p",[s._v("map将集合类(例如列表)元素进行转换的。还有一个 reduce() 函数可以将所有值合并成一个")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('List costBeforeTax = Arrays.asList(100, 200, 300, 400, 500);\ndouble bill = costBeforeTax.stream().map((cost) -> cost + .12*cost).reduce((sum, cost) -> sum + cost).get();\nSystem.out.println("Total : " + bill);\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"collectors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#collectors"}},[s._v("#")]),s._v(" # Collectors")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// 将字符串换成大写并用逗号链接起来\nList<String> G7 = Arrays.asList("USA", "Japan", "France", "Germany", "Italy", "U.K.","Canada");\nString G7Countries = Gstream().map(x -> x.toUpperCase()).collect(Collectors.joining(", "));\nSystem.out.println(G7Countries);\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[s._v('Collectors.joining(", ")')]),s._v(" "),a("li",[s._v("Collectors.toList()")]),s._v(" "),a("li",[s._v("Collectors.toSet() ，生成set集合")]),s._v(" "),a("li",[s._v("Collectors.toMap(MemberModel::getUid, Function.identity())")]),s._v(" "),a("li",[s._v("Collectors.toMap(ImageModel::getAid, o -> IMAGE_ADDRESS_PREFIX + o.getUrl())")])]),s._v(" "),a("h3",{attrs:{id:"flatmap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#flatmap"}},[s._v("#")]),s._v(" # flatMap")]),s._v(" "),a("blockquote",[a("p",[s._v("将多个Stream连接成一个Stream")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("List<Integer> result= Stream.of(Arrays.asList(1,3),Arrays.asList(5,6)).flatMap(a->a.stream()).collect(Collectors.toList());\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("结果: [1, 3, 5, 6]")])]),s._v(" "),a("h3",{attrs:{id:"distinct"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#distinct"}},[s._v("#")]),s._v(" # distinct")]),s._v(" "),a("blockquote",[a("p",[s._v("去重")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("List<LikeDO> likeDOs=new ArrayList<LikeDO>();\nList<Long> likeTidList = likeDOs.stream().map(LikeDO::getTid)\n                .distinct().collect(Collectors.toList());\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"count"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#count"}},[s._v("#")]),s._v(" # count")]),s._v(" "),a("blockquote",[a("p",[s._v("计总数")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("int countOfAdult=persons.stream()\n                       .filter(p -> p.getAge() > 18)\n                       .map(person -> new Adult(person))\n                       .count();\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"match"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#match"}},[s._v("#")]),s._v(" # Match")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('boolean anyStartsWithA =\n    stringCollection\n        .stream()\n        .anyMatch((s) -> s.startsWith("a"));\n\nSystem.out.println(anyStartsWithA);      // true\n\nboolean allStartsWithA =\n    stringCollection\n        .stream()\n        .allMatch((s) -> s.startsWith("a"));\n\nSystem.out.println(allStartsWithA);      // false\n\nboolean noneStartsWithZ =\n    stringCollection\n        .stream()\n        .noneMatch((s) -> s.startsWith("z"));\n\nSystem.out.println(noneStartsWithZ);      // true\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("h3",{attrs:{id:"min-max-summarystatistics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#min-max-summarystatistics"}},[s._v("#")]),s._v(" # min,max,summaryStatistics")]),s._v(" "),a("blockquote",[a("p",[s._v("最小值，最大值")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('List<Person> lists = new ArrayList<Person>();\nlists.add(new Person(1L, "p1"));\nlists.add(new Person(2L, "p2"));\nlists.add(new Person(3L, "p3"));\nlists.add(new Person(4L, "p4"));\nPerson a = lists.stream().max(Comparator.comparing(t -> t.getId())).get();\nSystem.out.println(a.getId());\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("blockquote",[a("p",[s._v("如果比较器涉及多个条件，比较复杂，可以定制")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Person a = lists.stream().min(new Comparator<Person>() {\n\n      @Override\n      public int compare(Person o1, Person o2) {\n           if (ogetId() > ogetId()) return -1;\n           if (ogetId() < ogetId()) return 1;\n           return 0;\n       }\n }).get();\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("blockquote",[a("p",[s._v("summaryStatistics")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('//获取数字的个数、最小值、最大值、总和以及平均值\nList<Integer> primes = Arrays.asList(2, 3, 5, 7, 11, 13, 17, 19, 23, 29);\nIntSummaryStatistics stats = primes.stream().mapToInt((x) -> x).summaryStatistics();\nSystem.out.println("Highest prime number in List : " + stats.getMax());\nSystem.out.println("Lowest prime number in List : " + stats.getMin());\nSystem.out.println("Sum of all prime numbers : " + stats.getSum());\nSystem.out.println("Average of all prime numbers : " + stats.getAverage());\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"peek"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#peek"}},[s._v("#")]),s._v(" # peek")]),s._v(" "),a("blockquote",[a("p",[s._v("可以使用peek方法，peek方法可只包含一个空的方法体，只要能设置断点即可，但有些IDE不允许空，可以如下文示例，简单写一个打印逻辑。")])]),s._v(" "),a("blockquote",[a("p",[s._v("注意，调试完后要删掉。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('List<Person> lists = new ArrayList<Person>();\nlists.add(new Person(1L, "p1"));\nlists.add(new Person(2L, "p2"));\nlists.add(new Person(3L, "p3"));\nlists.add(new Person(4L, "p4"));\nSystem.out.println(lists);\n\nList<Person> list2 = lists.stream()\n\t\t\t\t .filter(f -> f.getName().startsWith("p"))\n                .peek(t -> {\n                    System.out.println(t.getName());\n                })\n                .collect(Collectors.toList());\nSystem.out.println(list2);\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h3",{attrs:{id:"functionalinterface"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#functionalinterface"}},[s._v("#")]),s._v(" # FunctionalInterface")]),s._v(" "),a("h3",{attrs:{id:"理解注解-functioninterface"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#理解注解-functioninterface"}},[s._v("#")]),s._v(" # 理解注解 @FunctionInterface")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/**\n * An informative annotation type used to indicate that an interface\n * type declaration is intended to be a <i>functional interface</i> as\n * defined by the Java Language Specification.\n *\n * Conceptually, a functional interface has exactly one abstract\n * method.  Since {@linkplain java.lang.reflect.Method#isDefault()\n * default methods} have an implementation, they are not abstract.  If\n * an interface declares an abstract method overriding one of the\n * public methods of {@code java.lang.Object}, that also does\n * <em>not</em> count toward the interface's abstract method count\n * since any implementation of the interface will have an\n * implementation from {@code java.lang.Object} or elsewhere.\n *\n * <p>Note that instances of functional interfaces can be created with\n * lambda expressions, method references, or constructor references.\n *\n * <p>If a type is annotated with this annotation type, compilers are\n * required to generate an error message unless:\n *\n * <ul>\n * <li> The type is an interface type and not an annotation type, enum, or class.\n * <li> The annotated type satisfies the requirements of a functional interface.\n * </ul>\n *\n * <p>However, the compiler will treat any interface meeting the\n * definition of a functional interface as a functional interface\n * regardless of whether or not a {@code FunctionalInterface}\n * annotation is present on the interface declaration.\n *\n * @jls  The Class Object\n * @jls 8 Functional Interfaces\n * @jls 3 Interface Method Body\n * @since 8\n */\n@Documented\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.TYPE)\npublic @interface FunctionalInterface{}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br")])]),a("ul",[a("li",[a("blockquote",[a("p",[s._v("interface做注解的注解类型，被定义成java语言规范")])])]),s._v(" "),a("li",[a("blockquote",[a("p",[s._v("一个被它注解的接口只能有一个抽象方法，有两种例外")])])]),s._v(" "),a("li",[a("blockquote",[a("p",[s._v("第一是接口允许有实现的方法，这种实现的方法是用default关键字来标记的(java反射中java.lang.reflect.Method#isDefault()方法用来判断是否是default方法)")])])]),s._v(" "),a("li",[a("blockquote",[a("p",[s._v("第二如果声明的方法和java.lang.Object中的某个方法一样，它可以不当做未实现的方法，不违背这个原则: 一个被它注解的接口只能有一个抽象方法, 比如:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("java public interface Comparator<T> { int compare(T o1, T o2); boolean equals(Object obj); }\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("blockquote",[a("p",[s._v("如果一个类型被这个注解修饰，那么编译器会要求这个类型必须满足如下条件:")])]),s._v(" "),a("ul",[a("li",[s._v("这个类型必须是一个interface，而不是其他的注解类型、枚举enum或者类class")]),s._v(" "),a("li",[s._v("这个类型必须满足function interface的所有要求，如你个包含两个抽象方法的接口增加这个注解，会有编译错误。")])])]),s._v(" "),a("li",[a("blockquote",[a("p",[s._v("编译器会自动把满足function interface要求的接口自动识别为function interface，所以你才不需要对上面示例中的 ITest接口增加@FunctionInterface注解。")])])])]),s._v(" "),a("h3",{attrs:{id:"自定义函数接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义函数接口"}},[s._v("#")]),s._v(" # 自定义函数接口")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('@FunctionalInterface\npublic interface IMyInterface {\n    void study();\n}\n\npackage com.isea.java;\npublic class TestIMyInterface {\n    public static void main(String[] args) {\n        IMyInterface iMyInterface = () -> System.out.println("I like study");\n        iMyInterface.study();\n    }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h3",{attrs:{id:"内置四大函数接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内置四大函数接口"}},[s._v("#")]),s._v(" # 内置四大函数接口")]),s._v(" "),a("ul",[a("li",[s._v("消费型接口: Consumer< T> void accept(T t)有参数，无返回值的抽象方法；")])]),s._v(" "),a("blockquote",[a("blockquote",[a("p",[s._v("比如: map.forEach(BiConsumer<A, T>)")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('Consumer<Person> greeter = (p) -> System.out.println("Hello, " + p.firstName);\ngreeter.accept(new Person("Luke", "Skywalker"));\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("供给型接口: Supplier < T> T get() 无参有返回值的抽象方法；")])]),s._v(" "),a("blockquote",[a("blockquote",[a("p",[s._v("以stream().collect(Collector<? super T, A, R> collector)为例:")])])]),s._v(" "),a("blockquote",[a("p",[s._v("比如:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Supplier<Person> personSupplier = Person::new;\npersonSupplier.get();   // new Person\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[s._v("再如:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// 调用方法\n<R, A> R collect(Collector<? super T, A, R> collector)\n\n// Collectors.toSet\npublic static <T>\n\tCollector<T, ?, Set<T>> toSet() {\n    \treturn new CollectorImpl<>((Supplier<Set<T>>) HashSet::new, Set::add,\n                               (left, right) -> { left.addAll(right); return left; },\n                               CH_UNORDERED_ID);\n}\n\n// CollectorImpl\nprivate final Supplier<A> supplier;\nprivate final BiConsumer<A, T> accumulator;\nprivate final BinaryOperator<A> combiner;\nprivate final Function<A, R> finisher;\nprivate final Set<Characteristics> characteristics;\n\nCollectorImpl(Supplier<A> supplier,\n              BiConsumer<A, T> accumulator,\n              BinaryOperator<A> combiner,\n              Function<A,R> finisher,\n              Set<Characteristics> characteristics) {\n    this.supplier = supplier;\n    this.accumulator = accumulator;\n    this.combiner = combiner;\n    this.finisher = finisher;\n    this.characteristics = characteristics;\n}\n\nCollectorImpl(Supplier<A> supplier,\n              BiConsumer<A, T> accumulator,\n              BinaryOperator<A> combiner,\n              Set<Characteristics> characteristics) {\n    this(supplier, accumulator, combiner, castingIdentity(), characteristics);\n}\n\n// collect()方法实现\npublic final <R, A> R collect(Collector<? super P_OUT, A, R> collector) {\n    A container;\n    if (isParallel()\n            && (collector.characteristics().contains(Collector.Characteristics.CONCURRENT))\n            && (!isOrdered() || collector.characteristics().contains(Collector.Characteristics.UNORDERED))) {\n        container = collector.supplier().get();\n        BiConsumer<A, ? super P_OUT> accumulator = collector.accumulator();\n        forEach(u -> accumulator.accept(container, u));\n    }\n    else {\n        container = evaluate(ReduceOps.makeRef(collector));\n    }\n    return collector.characteristics().contains(Collector.Characteristics.IDENTITY_FINISH)\n           ? (R) container\n           : collector.finisher().apply(container);\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br")])]),a("ul",[a("li",[s._v("断定型接口: Predicate"),a("T",[s._v(" boolean test(T t):有参，但是返回值类型是固定的boolean")])],1)]),s._v(" "),a("blockquote",[a("blockquote",[a("p",[s._v("比如: steam().filter()中参数就是Predicate")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('Predicate<String> predicate = (s) -> s.length() > 0;\n\npredicate.test("foo");              // true\npredicate.negate().test("foo");     // false\n\nPredicate<Boolean> nonNull = Objects::nonNull;\nPredicate<Boolean> isNull = Objects::isNull;\n\nPredicate<String> isEmpty = String::isEmpty;\nPredicate<String> isNotEmpty = isEmpty.negate();\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("ul",[a("li",[s._v("函数型接口: Function<T,R> R apply(T t)有参有返回值的抽象方法；")])]),s._v(" "),a("blockquote",[a("blockquote",[a("p",[s._v("比如: steam().map() 中参数就是Function<? super T, ? extends R>；reduce()中参数BinaryOperator"),a("T",[s._v(" (ps: BinaryOperator"),a("T",[s._v(" extends BiFunction<T,T,T>)")])],1)],1)])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('Function<String, Integer> toInteger = Integer::valueOf;\nFunction<String, String> backToString = toInteger.andThen(String::valueOf);\n\nbackToString.apply("123");     // "123"\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"一些例子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一些例子"}},[s._v("#")]),s._v(" # 一些例子")]),s._v(" "),a("ul",[a("li",[s._v("输出 年龄>25的女程序员中名字排名前3位的姓名")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('javaProgrammers.stream()\n          .filter((p) -> (p.getAge() > 25))\n          .filter((p) -> ("female".equals(p.getGender())))\n          .sorted((p, p2) -> (p.getFirstName().compareTo(pgetFirstName())))\n          .limit(3)\n          //.forEach(e -> e.setSalary(e.getSalary() / 100 * 5 + e.getSalary()))//涨工资\n          .forEach((p) -> System.out.printf("%s %s; ", p.getFirstName(), p.getLastName()));\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("ul",[a("li",[s._v("工资最高的 Java programmer")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Person person = javaProgrammers\n          .stream()\n          .max((p, p2) -> (p.getSalary() - pgetSalary()))\n          .get()\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[s._v("将 Java programmers 的 first name 存放到 TreeSet")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("TreeSet<String> javaDevLastName = javaProgrammers\n          .stream()\n          .map(Person::getLastName)\n          .collect(toCollection(TreeSet::new))\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[s._v("计算付给 Java programmers 的所有money")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("int totalSalary = javaProgrammers\n          .parallelStream()\n          .mapToInt(p -> p.getSalary())\n          .sum();\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[s._v("Comparator多属性排序: 先按名字不分大小写排，再按GID倒序排，最后按年龄正序排")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('public static void main(String[] args) {\n\tList<Person> personList = getTestList();\n\tpersonList.sort(Comparator.comparing(Person::getName, String.CASE_INSENSITIVE_ORDER)\n\t\t\t.thenComparing(Person::getGid, (a, b) -> b.compareTo(a))\n\t\t\t.thenComparingInt(Person::getAge));\n\tpersonList.stream().forEach(System.out::println);\n}\n\npublic static List<Person> getTestList() {\n\treturn Lists.newArrayList(new Person("dai", "301", 10), new Person("dai", "303", 10),\n\t\t\tnew Person("dai", "303", 8), new Person("dai", "303", 6), new Person("dai", "303", 11),\n\t\t\tnew Person("dai", "302", 9), new Person("zhang", "302", 9), new Person("zhang", "301", 9),\n\t\t\tnew Person("Li", "301", 8));\n}\n\n// 输出结果\n// Person [name=dai, gid=303, age=6]\n// Person [name=dai, gid=303, age=8]\n// Person [name=dai, gid=303, age=10]\n// Person [name=dai, gid=303, age=11]\n// Person [name=dai, gid=302, age=9]\n// Person [name=dai, gid=301, age=10]\n// Person [name=Li, gid=301, age=8]\n// Person [name=zhang, gid=302, age=9]\n// Person [name=zhang, gid=301, age=9]\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("ul",[a("li",[s._v("处理字符串")])]),s._v(" "),a("blockquote",[a("p",[s._v("两个新的方法可在字符串类上使用: join和chars。第一个方法使用指定的分隔符，将任何数量的字符串连接为一个字符串。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('String.join(":", "foobar", "foo", "bar");\n// => foobar:foo:bar\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[s._v("第二个方法chars从字符串所有字符创建数据流，所以你可以在这些字符上使用流式操作。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('"foobar:foo:bar"\n    .chars()\n    .distinct()\n    .mapToObj(c -> String.valueOf((char)c))\n    .sorted()\n    .collect(Collectors.joining());\n// => :abfor\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("blockquote",[a("p",[s._v("不仅仅是字符串，正则表达式模式串也能受益于数据流。我们可以分割任何模式串，并创建数据流来处理它们，而不是将字符串分割为单个字符的数据流，像下面这样:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('Pattern.compile(":")\n    .splitAsStream("foobar:foo:bar")\n    .filter(s -> s.contains("bar"))\n    .sorted()\n    .collect(Collectors.joining(":"));\n// => bar:foobar\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("blockquote",[a("p",[s._v("此外，正则模式串可以转换为谓词。这些谓词可以像下面那样用于过滤字符串流:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('Pattern pattern = Pattern.compile(".*@gmail\\\\\\.com");\nStream.of("bob@gmail.com", "alice@hotmail.com")\n    .filter(pattern.asPredicate())\n    .count();\n// => 1\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("blockquote",[a("p",[s._v("上面的模式串接受任何以@gmail.com结尾的字符串，并且之后用作Java8的Predicate来过滤电子邮件地址流。")])]),s._v(" "),a("ul",[a("li",[s._v("Local Cache实现")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('public class TestLocalCache {\n\n\tprivate static ConcurrentHashMap<Integer, Long> cache = new ConcurrentHashMap<>();\n\n\tstatic long fibonacci(int i) {\n\t\tif (i == 0)\n\t\t\treturn i;\n\n\t\tif (i == 1)\n\t\t\treturn 1;\n\n\t\treturn cache.computeIfAbsent(i, (key) -> {\n\t\t\tSystem.out.println("Slow calculation of " + key);\n\n\t\t\treturn fibonacci(i - 2) + fibonacci(i - 1);\n\t\t});\n\t}\n\t\n\tpublic static void main(String[] args) {\n\t\t// warm up\n\t\tfor (int i = 0; i < 101; i++)\n\t        System.out.println(\n\t            "f(" + i + ") = " + fibonacci(i));\n\n\t\t// read -> cal\n\t\tlong current = System.currentTimeMillis();\n\t\tSystem.out.println(fibonacci(100));\n\t\tSystem.out.println(System.currentTimeMillis()-current);\n\t}\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br")])]),a("ul",[a("li",[s._v("集合--》取元素的一个属性--》去重---》组装成List--》返回")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("List<LikeDO> likeDOs=new ArrayList<LikeDO>();\nList<Long> likeTidList = likeDOs.stream().map(LikeDO::getTid)\n                .distinct().collect(Collectors.toList());\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("集合--》按表达式过滤--》遍历、每个元系处理--》放入预先定义的集合中")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('Map<String, StkProduct> newStockName2Product = Maps.newConcurrentMap();\n        stockProducts.stream().filter(stkProduct -> stkProduct.enabled).forEach(stkProduct -> {\n            String newName = BCConvert.bj2qj(StringUtils.replace(stkProduct.name, " ", ""));\n            newStockName2Product.put(newName, stkProduct);\n        });\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('Set<String> qjStockNames;\n qjStockNames.stream().filter(name -> !acAutomaton.getKey2link().containsKey(name)).forEach(name -> {\n            String value = "";\n            StkProduct stkProduct = stockNameQj2Product.get(name);\n            if (stkProduct != null) {\n                value = stkProduct.name;\n            }\n            acAutomaton.getKey2link().put(name, value);\n        });\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ul",[a("li",[s._v("集合--》map")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("List<ImageModel> imageModelList = null;\nMap<Long, String> imagesMap = null;\nimagesMap = imageModelList.stream().collect(Collectors.toMap(ImageModel::getAid, o -> IMAGE_ADDRESS_PREFIX + o.getUrl()));\n\nMap<String, String> kvMap = postDetailCacheList.stream().collect(Collectors.toMap((detailCache) ->\n                getBbsSimplePostKey(detailCache.getTid()), JSON::toJSONString));\n\nMap<Long, Long> pidToTid；\nList<String> pidKeyList = pidToTid.entrySet().stream().map((o) -> getKeyBbsReplyPid(o.getValue(), o.getKey())).collect(Collectors.toList());\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ul",[a("li",[s._v("DO模型---》Model模型")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("List<AdDO> adDOList;\nadDOList.stream().map(adDo -> convertAdModel(adDo))\n                .collect(Collectors.toList());\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("phones 是一个List"),a("String",[s._v("，将相同的元素分组、归类")])],1)]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('List<String> phones=new ArrayList<String>();\n        phones.add("a");\n        phones.add("b");\n        phones.add("a");\n        phones.add("a");\n        phones.add("c");\n        phones.add("b");\n        Map<String, List<String>> phoneClassify = phones.stream().collect(Collectors.groupingBy(item -> item));\n        System.out.println(phoneClassify);\n返回结果: \n{a=[a, a, a], b=[b, b], c=[c]}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" # 参考资料")]),s._v(" "),a("ul",[a("li",[s._v("Lambda 表达式的 10 个示例在新窗口打开")]),s._v(" "),a("li",[s._v("learn-java8在新窗口打开")]),s._v(" "),a("li",[s._v("java8-tutorial在新窗口打开")]),s._v(" "),a("li",[s._v("一文让你明白lambda用法与源码分析在新窗口打开")]),s._v(" "),a("li",[s._v("http://blog.csdn.net/renfufei/article/details/24600507在新窗口打开")]),s._v(" "),a("li",[s._v("http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/Lambda-QuickStart/index.html在新窗口打开")]),s._v(" "),a("li",[s._v("Java8 Lambda表达式教程 https://blog.csdn.net/ioriogami/article/details/12782141")]),s._v(" "),a("li",[s._v("Java8 6个问题 https://wizardforcel.gitbooks.io/java8-tutorials/content/Java%208%20%E7%9A%846%E4%B8%AA%E9%97%AE%E9%A2%98.html")])])])}),[],!1,null,null,null);a.default=n.exports}}]);